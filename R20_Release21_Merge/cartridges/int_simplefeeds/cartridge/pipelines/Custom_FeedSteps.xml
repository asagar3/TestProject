<?xml version="1.0" encoding="UTF-8" ?>
<?demandware-pipeline version="2.0"?>

<pipeline group="Feeds" type="job">
  <branch basename="_ANONYMOUS_BRANCH_1">
    <segment>
      <node>
        <text-node>
          <description>Feed execution steps pipeline. Do not change in project.</description>
        </text-node>
        <node-display x="0" y="0"/>
      </node>
    </segment>
  </branch>
  <branch basename="_ANONYMOUS_BRANCH_2">
    <segment>
      <node>
        <text-node>
          <description>DownloadFeed pipeline is modified to download the pricefeed from Impex for IrelandSite.
It also shrinks the received ireland price feed file.

A task (ID=pricefeed_ie) is created for it in BM.</description>
        </text-node>
        <node-display height="2" x="3" y="0"/>
      </node>
    </segment>
  </branch>
  <branch basename="DownloadFeed">
    <segment>
      <node>
        <start-node call-mode="private" name="DownloadFeed" secure="false"/>
        <node-display x="3" y="2"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="&quot;FALSE&quot;" key="From_0"/>
          <key-binding alias="TechnicalError" key="To_0"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <decision-node condition-key="Task.id!='iaafeed' &amp;&amp; Task.id!='pricefeed_ie'" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="yes">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="0" y="1"/>
              <bend-point relative-to="source" x="-1" y="1"/>
              <bend-point relative-to="source" x="-1" y="-1"/>
              <bend-point relative-to="target" x="0" y="-1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <decision-node condition-key="Task.id=='MasterCatalog_Warnings'" condition-operator="expr"/>
              <node-display x="-2" y="0"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                    <bend-point relative-to="source" x="-2" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="true"/>
                      <config-property key="OnError" value="PIPELET_ERROR"/>
                      <config-property key="ScriptFile" value="feeds/PickPIMWarningFeed.ds"/>
                      <config-property key="Timeout" value="3600"/>
                      <key-binding alias="null" key="ScriptLog"/>
                      <key-binding alias="Task['remote-file-pattern']" key="RemoteFilePattern"/>
                      <key-binding alias="Task['remote-folder-url']" key="RemoteFolderURL"/>
                      <key-binding alias="Task['remote-login']" key="RemoteLogin"/>
                      <key-binding alias="Task['remote-password']" key="RemotePassword"/>
                      <key-binding alias="Task.id" key="TaskID"/>
                      <key-binding alias="MasterCatalogTask" key="TaskMasterCatalog"/>
                      <key-binding alias="Task['task-type']" key="TaskType"/>
                      <key-binding alias="Task['temp-folder']" key="TempFolder"/>
                      <key-binding alias="aray" key="aray"/>
                      <key-binding alias="File" key="File"/>
                      <key-binding alias="oldFileName" key="oldFileName"/>
                      <key-binding alias="RemoteFile" key="RemoteFile"/>
                      <key-binding alias="sitePrefResult" key="sitePrefResult"/>
                      <key-binding alias="StatusMessage" key="StatusMessage"/>
                      <key-binding alias="TechnicalError" key="TechnicalError"/>
                      <key-binding alias="timeStampValue" key="timeStampValue"/>
                      <key-binding alias="FirstCall" key="FirstCall"/>
                    </pipelet-node>
                    <node-display x="-1" y="2"/>
                    <branch basename="b2" source-connector="error">
                      <transition target-connector="in1" target-path="../b4.1">
                        <transition-display>
                          <bend-point relative-to="source" x="1" y="0"/>
                          <bend-point relative-to="source" x="1" y="-1"/>
                          <bend-point relative-to="target" x="0" y="-1"/>
                        </transition-display>
                      </transition>
                    </branch>
                  </node>
                  <transition target-connector="in1" target-path="../+1">
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="2"/>
                    </transition-display>
                  </transition>
                </segment>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="source" x="1" y="1"/>
                <bend-point relative-to="source" x="0" y="1"/>
              </transition-display>
            </simple-transition>
            <node>
              <decision-node condition-key="Task.id!='MasterCatalog_pim' &amp;&amp; Task.id!='FrenchCatalog_pim' &amp;&amp; Task.id!='IrelandCatalog_pim'  &amp;&amp; Task.id!='EUCatalog_pim' &amp;&amp; Task.id!='startofdayinventoryprodfeed_pim' &amp;&amp; Task.id!='pricefeed_pim'" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b3" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="true"/>
                      <config-property key="OnError" value="PIPELET_ERROR"/>
                      <config-property key="ScriptFile" value="feeds/DownloadFeed.ds"/>
                      <config-property key="Timeout" value="3600"/>
                      <key-binding alias="null" key="ScriptLog"/>
                      <key-binding alias="File" key="File"/>
                      <key-binding alias="TechnicalError" key="TechnicalError"/>
                      <key-binding alias="RemoteFileURL" key="RemoteFileURL"/>
                      <key-binding alias="Task['remote-file-pattern']" key="RemoteFilePattern"/>
                      <key-binding alias="Task['remote-folder-url']" key="RemoteFolderURL"/>
                      <key-binding alias="Task['remote-login']" key="RemoteLogin"/>
                      <key-binding alias="Task['remote-password']" key="RemotePassword"/>
                      <key-binding alias="Task['temp-folder']" key="TempFolder"/>
                      <key-binding alias="RemoteFile" key="RemoteFile"/>
                      <key-binding alias="sitePrefResult" key="sitePrefResult"/>
                      <key-binding alias="timeStampValue" key="timeStampValue"/>
                      <key-binding alias="oldFileName" key="oldFileName"/>
                      <key-binding alias="sitePrefID" key="sitePrefID"/>
                      <key-binding alias="aray" key="aray"/>
                      <key-binding alias="Task.id" key="TaskID"/>
                      <key-binding alias="Task['task-type']" key="TaskType"/>
                      <key-binding alias="MasterCatalogTask" key="TaskMasterCatalog"/>
                      <key-binding alias="StatusMessage" key="StatusMessage"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                    <branch basename="b2" source-connector="error">
                      <transition target-connector="in1" target-path="../b4.1">
                        <transition-display>
                          <bend-point relative-to="source" x="1" y="0"/>
                          <bend-point relative-to="source" x="1" y="1"/>
                          <bend-point relative-to="target" x="0" y="1"/>
                        </transition-display>
                      </transition>
                    </branch>
                  </node>
                  <transition target-connector="in1" target-path="../+1">
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="2"/>
                    </transition-display>
                  </transition>
                </segment>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="2" y="0"/>
                <bend-point relative-to="target" x="0" y="-1"/>
              </transition-display>
            </simple-transition>
            <node>
              <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="true"/>
                <config-property key="OnError" value="PIPELET_ERROR"/>
                <config-property key="ScriptFile" value="feeds/PickPIMFeed.ds"/>
                <key-binding alias="null" key="ScriptLog"/>
                <key-binding alias="Task['remote-file-pattern']" key="RemoteFilePattern"/>
                <key-binding alias="Task['remote-folder-url']" key="RemoteFolderURL"/>
                <key-binding alias="Task['remote-login']" key="RemoteLogin"/>
                <key-binding alias="Task['remote-password']" key="RemotePassword"/>
                <key-binding alias="Task.id" key="TaskID"/>
                <key-binding alias="MasterCatalogTask" key="TaskMasterCatalog"/>
                <key-binding alias="Task['task-type']" key="TaskType"/>
                <key-binding alias="Task['temp-folder']" key="TempFolder"/>
                <key-binding alias="aray" key="aray"/>
                <key-binding alias="File" key="File"/>
                <key-binding alias="oldFileName" key="oldFileName"/>
                <key-binding alias="RemoteFile" key="RemoteFile"/>
                <key-binding alias="sitePrefResult" key="sitePrefResult"/>
                <key-binding alias="StatusMessage" key="StatusMessage"/>
                <key-binding alias="TechnicalError" key="TechnicalError"/>
                <key-binding alias="timeStampValue" key="timeStampValue"/>
              </pipelet-node>
              <node-display x="1" y="1"/>
              <branch basename="b4" source-connector="error">
                <transition target-connector="in1"/>
                <segment>
                  <node>
                    <join-node/>
                    <node-display x="1" y="0"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="1" y="0"/>
                      <bend-point relative-to="target" x="-1" y="0"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <decision-node condition-key="sitePrefResult != null" condition-operator="expr"/>
                    <node-display orientation="horizontal" x="1" y="-2"/>
                    <branch basename="b2" source-connector="yes">
                      <transition target-connector="in1" target-path="../../b4.1/b2.1">
                        <transition-display>
                          <bend-point relative-to="target" x="-1" y="0"/>
                        </transition-display>
                      </transition>
                    </branch>
                  </node>
                  <transition target-connector="in1" target-path="../../b3.1"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
                <bend-point relative-to="target" x="0" y="-1"/>
              </transition-display>
            </simple-transition>
            <node>
              <decision-node condition-key="Task.id!='startofdayinventoryprodfeed'" condition-operator="expr"/>
              <node-display x="1" y="1"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in1" target-path="../+2"/>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="target" x="-1" y="0"/>
              </transition-display>
            </simple-transition>
            <node>
              <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <config-property key="OnError" value="PIPELET_ERROR"/>
                <config-property key="ScriptFile" value="feeds/ShrinkFeed.ds"/>
                <config-property key="Timeout" value="1500000"/>
                <key-binding alias="null" key="ScriptLog"/>
                <key-binding alias="Task['temp-folder']" key="TempFolder"/>
                <key-binding alias="&quot;MyRemoteFile.xml&quot;" key="RemoteFile"/>
                <key-binding alias="&quot;MyTempFile.xml&quot;" key="TempFolderFile"/>
                <key-binding alias="Task['remote-folder-url']" key="RemoteFolderURL"/>
                <key-binding alias="Task['remote-login']" key="RemoteLogin"/>
                <key-binding alias="Task['remote-password']" key="RemotePassword"/>
                <key-binding alias="File" key="File"/>
                <key-binding alias="File" key="FileObj"/>
                <key-binding alias="Task['remote-file-pattern']" key="FilePattern"/>
                <key-binding alias="File" key="ShrinkFile"/>
                <key-binding alias="FileOriginal" key="OriginalFile"/>
                <key-binding alias="TechnicalError" key="TechnicalError"/>
                <key-binding alias="inventoryFound" key="inventoryFound"/>
                <key-binding alias="StatusMessage" key="StatusMessage"/>
              </pipelet-node>
              <node-display orientation="horizontal" x="2" y="0"/>
              <branch basename="b3" source-connector="error">
                <transition target-connector="in3" target-path="../b3.2">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
              </transition-display>
            </simple-transition>
            <node>
              <decision-node condition-key="!(inventoryFound)" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b4" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-NoInventoryRecords"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../../b3.2"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="../+2">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="source" x="1" y="1"/>
                <bend-point relative-to="target" x="0" y="1"/>
              </transition-display>
            </transition>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="target" x="-1" y="0"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="true"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/PickFeed.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="Task['remote-file-pattern']" key="FilePattern"/>
          <key-binding alias="Task['temp-folder']" key="TempFolder"/>
          <key-binding alias="File" key="PickFile"/>
          <key-binding alias="TechnicalError" key="TechnicalError"/>
          <key-binding alias="StatusMessage" key="StatusMessage"/>
        </pipelet-node>
        <node-display orientation="horizontal" x="1" y="-2"/>
        <branch basename="b3" source-connector="error">
          <transition target-connector="in1">
            <transition-display>
              <bend-point relative-to="source" x="0" y="1"/>
              <bend-point relative-to="source" x="1" y="1"/>
              <bend-point relative-to="target" x="1" y="0"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="4"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="4"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <decision-node condition-key="TechnicalError=='TRUE'" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
                    <node-display x="0" y="1"/>
                    <branch basename="b2" source-connector="yes">
                      <transition target-connector="in">
                        <transition-display>
                          <bend-point relative-to="source" x="0" y="1"/>
                        </transition-display>
                      </transition>
                      <segment>
                        <node>
                          <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                            <config-property key="Transactional" value="false"/>
                            <key-binding alias="true" key="From_0"/>
                            <key-binding alias="InstanceReqd" key="To_0"/>
                            <key-binding alias="&quot;feed_download_error&quot;" key="From_1"/>
                            <key-binding alias="EmailFlow" key="To_1"/>
                            <key-binding alias="null" key="From_6"/>
                            <key-binding alias="null" key="To_6"/>
                            <key-binding alias="null" key="From_7"/>
                            <key-binding alias="null" key="To_7"/>
                            <key-binding alias="null" key="From_8"/>
                            <key-binding alias="null" key="To_8"/>
                            <key-binding alias="null" key="From_9"/>
                            <key-binding alias="null" key="To_9"/>
                            <key-binding alias="Task['error-email']" key="From_2"/>
                            <key-binding alias="MailTo" key="To_2"/>
                            <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                            <key-binding alias="MailParams" key="To_4"/>
                            <key-binding alias="MailSubject" key="To_3"/>
                            <key-binding alias="" key="From_3"/>
                          </pipelet-node>
                          <node-display x="0" y="1"/>
                        </node>
                        <simple-transition/>
                        <node>
                          <call-node start-name-ref="Custom_FeedSteps-DownloadEmail"/>
                          <node-display x="0" y="1"/>
                        </node>
                        <transition target-connector="in1" target-path="../+1"/>
                      </segment>
                    </branch>
                  </node>
                  <transition target-connector="in1" target-path="./+1">
                    <transition-display>
                      <bend-point relative-to="source" x="1" y="0"/>
                      <bend-point relative-to="target" x="1" y="0"/>
                    </transition-display>
                  </transition>
                </segment>
                <segment>
                  <node>
                    <join-node/>
                    <node-display x="0" y="3"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <decision-node condition-key="Task['on-temporary-error']!='FAIL'" condition-operator="expr"/>
                    <node-display x="0" y="1"/>
                    <branch basename="b2" source-connector="yes">
                      <transition target-connector="in">
                        <transition-display>
                          <bend-point relative-to="source" x="0" y="1"/>
                        </transition-display>
                      </transition>
                      <segment>
                        <node>
                          <end-node name="ERROR"/>
                          <node-display x="0" y="1"/>
                        </node>
                      </segment>
                    </branch>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="1" y="0"/>
                      <bend-point relative-to="source" x="1" y="-1"/>
                      <bend-point relative-to="target" x="0" y="-1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <stop-node/>
                    <node-display x="1" y="0"/>
                  </node>
                </segment>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="target" x="-1" y="0"/>
              </transition-display>
            </simple-transition>
            <node>
              <end-node name="NO_MORE_FILES"/>
              <node-display orientation="horizontal" x="1" y="-1"/>
            </node>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="1" y="0"/>
          <bend-point relative-to="target" x="-1" y="-1"/>
          <bend-point relative-to="target" x="0" y="-1"/>
        </transition-display>
      </simple-transition>
      <node>
        <decision-node condition-key="Task.id!='pricefeed_ie'" condition-operator="expr"/>
        <node-display x="1" y="-1"/>
        <branch basename="b4" source-connector="yes">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="0" y="1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="true"/>
                <config-property key="OnError" value="PIPELET_ERROR"/>
                <config-property key="ScriptFile" value="feeds/CheckIAARunTimeStamps.ds"/>
                <key-binding alias="null" key="ScriptLog"/>
                <key-binding alias="File" key="fileName"/>
                <key-binding alias="timeStampValue" key="timeStampValue"/>
                <key-binding alias="oldFileName" key="oldFileName"/>
                <key-binding alias="Task['temp-folder']" key="TempFolder"/>
              </pipelet-node>
              <node-display orientation="horizontal" x="0" y="1"/>
              <branch basename="b2" source-connector="error">
                <transition target-connector="in1"/>
                <segment>
                  <node>
                    <join-node/>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition/>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-SendIncorrectTimeStampMail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <decision-node condition-key="!empty(oldFileName)" condition-operator="expr"/>
                    <node-display x="0" y="1"/>
                    <branch basename="b2" source-connector="yes">
                      <transition target-connector="in">
                        <transition-display>
                          <bend-point relative-to="source" x="0" y="1"/>
                        </transition-display>
                      </transition>
                      <segment>
                        <node>
                          <call-node start-name-ref="Custom_FeedSteps-DownloadFeed"/>
                          <node-display x="0" y="1"/>
                          <branch basename="b2" source-connector="SUCCESS">
                            <transition target-connector="in"/>
                            <segment>
                              <node>
                                <end-node name="SUCCESS"/>
                                <node-display x="0" y="1"/>
                              </node>
                            </segment>
                          </branch>
                        </node>
                        <transition target-connector="in1" target-path="../+1"/>
                      </segment>
                    </branch>
                  </node>
                  <transition target-connector="in1" target-path="./+1"/>
                </segment>
                <segment>
                  <node>
                    <join-node/>
                    <node-display x="1" y="0"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <end-node/>
                    <node-display x="0" y="1"/>
                  </node>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="../+2">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="target" x="5" y="0"/>
              </transition-display>
            </transition>
          </segment>
        </branch>
      </node>
      <transition target-connector="in2" target-path="./+1">
        <transition-display>
          <bend-point relative-to="source" x="2" y="0"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="1" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1">
        <transition-display>
          <bend-point relative-to="source" x="0" y="5"/>
          <bend-point relative-to="source" x="-1" y="5"/>
          <bend-point relative-to="target" x="5" y="0"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="-3" y="7"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <decision-node condition-key="TechnicalError=='TRUE'" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="yes">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="0" y="1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in"/>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="InstanceReqd" key="To_0"/>
                      <key-binding alias="&quot;feed_download_error&quot;" key="From_1"/>
                      <key-binding alias="EmailFlow" key="To_1"/>
                      <key-binding alias="null" key="From_5"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="Task['error-email']" key="From_2"/>
                      <key-binding alias="MailTo" key="To_2"/>
                      <key-binding alias="MailParams" key="To_4"/>
                      <key-binding alias="MailSubject" key="To_3"/>
                      <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                      <key-binding alias="" key="From_3"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition/>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-DownloadEmail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../../+1"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="../+1">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="target" x="1" y="0"/>
              </transition-display>
            </transition>
          </segment>
        </branch>
      </node>
      <transition target-connector="in1" target-path="./+1">
        <transition-display>
          <bend-point relative-to="source" x="1" y="0"/>
          <bend-point relative-to="target" x="1" y="0"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="4"/>
      </node>
      <simple-transition/>
      <node>
        <end-node name="SUCCESS"/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="_ANONYMOUS_BRANCH_4">
    <segment>
      <node>
        <text-node>
          <description>We cannot validate CSV files at this time (APP-12970). Skip validation for Active Data.</description>
        </text-node>
        <node-display x="7" y="0"/>
      </node>
    </segment>
  </branch>
  <branch basename="_ANONYMOUS_BRANCH_5">
    <segment>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/ShrinkPriceFeed.ds"/>
          <config-property key="Timeout" value="1500000"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="Task['temp-folder']" key="TempFolder"/>
          <key-binding alias="&quot;MyRemoteFile.xml&quot;" key="RemoteFile"/>
          <key-binding alias="&quot;MyTempFile.xml&quot;" key="TempFolderFile"/>
          <key-binding alias="Task['remote-folder-url']" key="RemoteFolderURL"/>
          <key-binding alias="Task['remote-login']" key="RemoteLogin"/>
          <key-binding alias="Task['remote-password']" key="RemotePassword"/>
          <key-binding alias="File" key="File"/>
          <key-binding alias="File" key="FileObj"/>
          <key-binding alias="Task['remote-file-pattern']" key="FilePattern"/>
          <key-binding alias="File" key="ShrinkFile"/>
          <key-binding alias="FileOriginal" key="OriginalFile"/>
          <key-binding alias="TechnicalError" key="TechnicalError"/>
          <key-binding alias="inventoryFound" key="inventoryFound"/>
        </pipelet-node>
        <node-display x="7" y="2"/>
        <branch basename="b2" source-connector="error">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="1" y="2"/>
              <bend-point relative-to="target" x="1" y="-1"/>
              <bend-point relative-to="target" x="0" y="-1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <key-binding alias="true" key="From_0"/>
                <key-binding alias="InstanceReqd" key="To_0"/>
                <key-binding alias="&quot;ie_pricefeed_shrink_error&quot;" key="From_1"/>
                <key-binding alias="EmailFlow" key="To_1"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
                <key-binding alias="Task['error-email']" key="From_2"/>
                <key-binding alias="MailTo" key="To_2"/>
                <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                <key-binding alias="MailParams" key="To_4"/>
                <key-binding alias="MailSubject" key="To_3"/>
                <key-binding alias="" key="From_3"/>
              </pipelet-node>
              <node-display x="0" y="2"/>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="target" x="0" y="-1"/>
              </transition-display>
            </simple-transition>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="To_9"/>
                <key-binding alias="MailParams.put(&quot;FileName&quot;, File)" key="From_9"/>
              </pipelet-node>
              <node-display x="0" y="2"/>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
              </transition-display>
            </simple-transition>
            <node>
              <call-node start-name-ref="Email-SendMail"/>
              <node-display x="0" y="1"/>
            </node>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/ArchiveFeed.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="'archive' + dw.io.File.SEPARATOR  + 'org_ie_pricefeed'" key="ArchiveFolder"/>
          <key-binding alias="FileOriginal" key="File"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b3" source-connector="error">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="1" y="2"/>
              <bend-point relative-to="target" x="3" y="-1"/>
              <bend-point relative-to="target" x="0" y="-1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
              <node-display x="-1" y="4"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="InstanceReqd" key="To_0"/>
                      <key-binding alias="&quot;feed_archive_error&quot;" key="From_1"/>
                      <key-binding alias="EmailFlow" key="To_1"/>
                      <key-binding alias="null" key="From_5"/>
                      <key-binding alias="null" key="To_5"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="Task['error-email']" key="From_2"/>
                      <key-binding alias="MailTo" key="To_2"/>
                      <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                      <key-binding alias="MailParams" key="To_4"/>
                      <key-binding alias="MailSubject" key="To_3"/>
                      <key-binding alias="" key="From_3"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-ArchiveEmail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../+1"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="./+1">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="target" x="1" y="0"/>
              </transition-display>
            </transition>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="3"/>
            </node>
          </segment>
        </branch>
      </node>
    </segment>
  </branch>
  <branch basename="ImportFeed">
    <segment>
      <node>
        <start-node call-mode="private" name="ImportFeed" secure="false"/>
        <node-display x="11" y="0"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node custom-name="reset ImportStatus" pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="From_0"/>
          <key-binding alias="ImportStatus" key="To_0"/>
          <key-binding alias="null" key="From_1"/>
          <key-binding alias="null" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <call-node start-name-ref="Custom_FeedSteps-RunTypeSpecificImport"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="PROCESS_ERROR">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="3" y="1"/>
              <bend-point relative-to="target" x="-1" y="-1"/>
              <bend-point relative-to="target" x="0" y="-1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <decision-node condition-key="ImportStatus!=null &amp;&amp; (ImportStatus.code=='IMPEX-120' || ImportStatus.code=='IMPEX-170')" condition-operator="expr"/>
              <node-display x="2" y="3"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <decision-node condition-key="Task['on-temporary-error']!='FAIL'" condition-operator="expr"/>
                    <node-display x="0" y="1"/>
                    <branch basename="b2" source-connector="yes">
                      <transition target-connector="in">
                        <transition-display>
                          <bend-point relative-to="source" x="0" y="1"/>
                        </transition-display>
                      </transition>
                      <segment>
                        <node>
                          <end-node name="LOCKED"/>
                          <node-display x="0" y="1"/>
                        </node>
                      </segment>
                    </branch>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="1" y="0"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <stop-node/>
                    <node-display orientation="horizontal" x="1" y="0"/>
                  </node>
                </segment>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="target" x="0" y="-2"/>
              </transition-display>
            </simple-transition>
            <node>
              <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
              <node-display x="2" y="1"/>
              <branch basename="b3" source-connector="yes">
                <transition target-connector="in"/>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="InstanceReqd" key="To_0"/>
                      <key-binding alias="&quot;feed_import_process_error&quot;" key="From_1"/>
                      <key-binding alias="EmailFlow" key="To_1"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="Task['error-email']" key="From_2"/>
                      <key-binding alias="MailTo" key="To_2"/>
                      <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                      <key-binding alias="MailParams" key="To_4"/>
                      <key-binding alias="MailSubject" key="To_3"/>
                      <key-binding alias="" key="From_3"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition/>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-ImportEmail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../+1"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="./+1">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="target" x="1" y="0"/>
              </transition-display>
            </transition>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="3"/>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
              </transition-display>
            </simple-transition>
            <node>
              <end-node name="ERROR"/>
              <node-display x="0" y="1"/>
            </node>
          </segment>
        </branch>
        <branch basename="b3" source-connector="PROCESS_SUCCESS">
          <transition target-connector="in"/>
          <segment>
            <node>
              <decision-node condition-key="(aray != null &amp;&amp; aray.length&gt;=3) &amp;&amp; Task.id!='iaafeed'" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in"/>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="true"/>
                      <key-binding alias="null" key="From_0"/>
                      <key-binding alias="null" key="From_1"/>
                      <key-binding alias="null" key="To_1"/>
                      <key-binding alias="null" key="From_2"/>
                      <key-binding alias="null" key="To_2"/>
                      <key-binding alias="null" key="From_3"/>
                      <key-binding alias="null" key="To_3"/>
                      <key-binding alias="null" key="From_4"/>
                      <key-binding alias="null" key="To_4"/>
                      <key-binding alias="null" key="From_5"/>
                      <key-binding alias="null" key="To_5"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="dw.system.Site.getCurrent().setCustomPreferenceValue(aray[1], aray[2])" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../+1"/>
                </segment>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="2" y="0"/>
                <bend-point relative-to="target" x="0" y="-1"/>
              </transition-display>
            </simple-transition>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="true"/>
                <key-binding alias="null" key="From_0"/>
                <key-binding alias="null" key="From_1"/>
                <key-binding alias="null" key="To_1"/>
                <key-binding alias="null" key="From_2"/>
                <key-binding alias="null" key="To_2"/>
                <key-binding alias="null" key="From_3"/>
                <key-binding alias="null" key="To_3"/>
                <key-binding alias="null" key="From_4"/>
                <key-binding alias="null" key="To_4"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_5"/>
                <key-binding alias="null" key="From_6"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="dw.system.Site.getCurrent().setCustomPreferenceValue(&quot;IAA_SUCCESS_TIME&quot;, timeStampValue)" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
              </pipelet-node>
              <node-display x="1" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1">
              <transition-display>
                <bend-point relative-to="source" x="0" y="2"/>
              </transition-display>
            </transition>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="-1" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <config-property key="OnError" value="PIPELET_ERROR"/>
                <config-property key="ScriptFile" value="feeds/suppressWarningEmails.ds"/>
                <key-binding alias="null" key="ScriptLog"/>
                <key-binding alias="ImportStatus.details.LogFileName" key="LogFileName"/>
                <key-binding alias="ImportStatus.details.DataWarningCount" key="WarningCount"/>
                <key-binding alias="nonSuppressDataWarningCount" key="NonSuppressWarningCount"/>
                <key-binding alias="Task.id" key="TaskId"/>
                <key-binding alias="Task['task-type']" key="TaskType"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="error">
                <transition target-connector="in2" target-path="./+1"/>
              </branch>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <decision-node condition-key="(ImportStatus.details.DataErrorCount==0 &amp;&amp; nonSuppressDataWarningCount==0) || Task['ignore-data-errors']=='TRUE'" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <decision-node condition-key="!empty(Task['success-email']) &amp;&amp; !empty(Config.custom.fromEmail) &amp;&amp; Task['send-success-email']=='TRUE'" condition-operator="expr"/>
                    <node-display x="0" y="1"/>
                    <branch basename="b2" source-connector="yes">
                      <transition target-connector="in"/>
                      <segment>
                        <node>
                          <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                            <config-property key="Transactional" value="false"/>
                            <key-binding alias="true" key="From_0"/>
                            <key-binding alias="InstanceReqd" key="To_0"/>
                            <key-binding alias="&quot;feed_import_success&quot;" key="From_1"/>
                            <key-binding alias="EmailFlow" key="To_1"/>
                            <key-binding alias="null" key="From_6"/>
                            <key-binding alias="null" key="To_6"/>
                            <key-binding alias="null" key="From_7"/>
                            <key-binding alias="null" key="To_7"/>
                            <key-binding alias="null" key="From_8"/>
                            <key-binding alias="null" key="To_8"/>
                            <key-binding alias="null" key="From_9"/>
                            <key-binding alias="null" key="To_9"/>
                            <key-binding alias="Task['error-email']" key="From_2"/>
                            <key-binding alias="MailTo" key="To_2"/>
                            <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                            <key-binding alias="MailParams" key="To_4"/>
                            <key-binding alias="MailSubject" key="To_3"/>
                            <key-binding alias="" key="From_3"/>
                          </pipelet-node>
                          <node-display x="0" y="1"/>
                        </node>
                        <simple-transition/>
                        <node>
                          <call-node start-name-ref="Custom_FeedSteps-ImportEmail"/>
                          <node-display x="0" y="1"/>
                        </node>
                        <transition target-connector="in1" target-path="../+1"/>
                      </segment>
                    </branch>
                  </node>
                  <transition target-connector="in1" target-path="./+1">
                    <transition-display>
                      <bend-point relative-to="source" x="1" y="0"/>
                      <bend-point relative-to="target" x="1" y="0"/>
                    </transition-display>
                  </transition>
                </segment>
                <segment>
                  <node>
                    <join-node/>
                    <node-display x="0" y="3"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <end-node name="SUCCESS"/>
                    <node-display x="0" y="1"/>
                  </node>
                </segment>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="target" x="0" y="-1"/>
              </transition-display>
            </simple-transition>
            <node>
              <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail) &amp;&amp; Task.id!='pricefeed'" condition-operator="expr"/>
              <node-display x="1" y="1"/>
              <branch basename="b3" source-connector="yes">
                <transition target-connector="in"/>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="InstanceReqd" key="To_0"/>
                      <key-binding alias="&quot;feed_import_error_warning&quot;" key="From_1"/>
                      <key-binding alias="EmailFlow" key="To_1"/>
                      <key-binding alias="null" key="From_5"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="Task['error-email']" key="From_2"/>
                      <key-binding alias="MailTo" key="To_2"/>
                      <key-binding alias="MailParams" key="To_4"/>
                      <key-binding alias="MailSubject" key="To_3"/>
                      <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                      <key-binding alias="" key="From_3"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition/>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-ImportEmail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../+1"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="./+1">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="target" x="1" y="0"/>
              </transition-display>
            </transition>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="3"/>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
              </transition-display>
            </simple-transition>
            <node>
              <end-node name="DATAERROR"/>
              <node-display x="0" y="1"/>
            </node>
          </segment>
        </branch>
      </node>
    </segment>
  </branch>
  <branch basename="ValidateFeed">
    <segment>
      <node>
        <start-node call-mode="private" name="ValidateFeed" secure="false"/>
        <node-display x="8" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <decision-node condition-key="Task.id!='DownloadAndImportActiveData'" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="yes">
          <transition target-connector="in"/>
          <segment>
            <node>
              <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <config-property key="OnError" value="PIPELET_ERROR"/>
                <config-property key="ScriptFile" value="feeds/GetSchemaByTaskID.ds"/>
                <key-binding alias="null" key="ScriptLog"/>
                <key-binding alias="Schema" key="Schema"/>
                <key-binding alias="Task['task-type']" key="TaskID"/>
                <key-binding alias="Task['task-type']" key="TaskType"/>
                <key-binding alias="StatusMessage" key="StatusMessage"/>
              </pipelet-node>
              <node-display x="0" y="2"/>
              <branch basename="b2" source-connector="error">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="1" y="0"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <stop-node/>
                    <node-display orientation="horizontal" x="1" y="0"/>
                  </node>
                </segment>
              </branch>
            </node>
            <simple-transition/>
            <node>
              <pipelet-node custom-name="reset ValidationStatus" pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <key-binding alias="null" key="From_0"/>
                <key-binding alias="ValidationStatus" key="To_0"/>
                <key-binding alias="null" key="From_1"/>
                <key-binding alias="null" key="To_1"/>
                <key-binding alias="null" key="From_2"/>
                <key-binding alias="null" key="To_2"/>
                <key-binding alias="null" key="From_3"/>
                <key-binding alias="null" key="To_3"/>
                <key-binding alias="null" key="From_4"/>
                <key-binding alias="null" key="To_4"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_5"/>
                <key-binding alias="null" key="From_6"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <pipelet-node pipelet-name="ValidateXMLFile" pipelet-set-identifier="bc_api">
                <key-binding alias="File" key="File"/>
                <key-binding alias="Schema" key="Schema"/>
                <key-binding alias="null" key="LogFileName"/>
                <key-binding alias="ValidationErrorCount" key="ErrorCount"/>
                <key-binding alias="null" key="WarningCount"/>
                <key-binding alias="ValidationStatus" key="Status"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
              <branch basename="b3" source-connector="error">
                <transition target-connector="in1" target-path="./+1">
                  <transition-display>
                    <bend-point relative-to="source" x="2" y="0"/>
                  </transition-display>
                </transition>
              </branch>
            </node>
            <simple-transition/>
            <node>
              <decision-node condition-key="ValidationStatus.code=='IMPEX-0'" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b4" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <end-node name="SUCCESS"/>
                    <node-display x="0" y="1"/>
                  </node>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="1" y="0"/>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="target" x="2" y="-2"/>
                <bend-point relative-to="target" x="0" y="-2"/>
              </transition-display>
            </simple-transition>
            <node>
              <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
              <node-display x="-1" y="3"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="InstanceReqd" key="To_0"/>
                      <key-binding alias="&quot;feed_validation_error&quot;" key="From_1"/>
                      <key-binding alias="EmailFlow" key="To_1"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="Task['error-email']" key="From_2"/>
                      <key-binding alias="MailTo" key="To_2"/>
                      <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                      <key-binding alias="MailParams" key="To_4"/>
                      <key-binding alias="MailSubject" key="To_3"/>
                      <key-binding alias="" key="From_3"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="null" key="From_0"/>
                      <key-binding alias="null" key="To_0"/>
                      <key-binding alias="null" key="From_1"/>
                      <key-binding alias="null" key="To_1"/>
                      <key-binding alias="null" key="From_2"/>
                      <key-binding alias="null" key="To_2"/>
                      <key-binding alias="null" key="From_3"/>
                      <key-binding alias="null" key="To_3"/>
                      <key-binding alias="null" key="From_4"/>
                      <key-binding alias="null" key="To_4"/>
                      <key-binding alias="null" key="From_5"/>
                      <key-binding alias="null" key="To_5"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="MailParams.put(&quot;StatusMessage&quot;,StatusMessage)" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-ValidationEmail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../+1"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="./+1">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="target" x="1" y="-2"/>
                <bend-point relative-to="target" x="1" y="0"/>
              </transition-display>
            </transition>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="4"/>
            </node>
            <simple-transition/>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="true"/>
                <key-binding alias="&quot;Warning&quot;" key="From_0"/>
                <key-binding alias="dw.system.Site.getCurrent().preferences.custom.SODFeed_Status" key="To_0"/>
                <key-binding alias="null" key="From_1"/>
                <key-binding alias="null" key="To_1"/>
                <key-binding alias="null" key="From_2"/>
                <key-binding alias="null" key="To_2"/>
                <key-binding alias="null" key="From_3"/>
                <key-binding alias="null" key="To_3"/>
                <key-binding alias="null" key="From_4"/>
                <key-binding alias="null" key="To_4"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_5"/>
                <key-binding alias="null" key="From_6"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <end-node name="ERROR"/>
              <node-display x="0" y="1"/>
            </node>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="1" y="0"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node name="SUCCESS"/>
        <node-display orientation="horizontal" x="1" y="0"/>
      </node>
    </segment>
  </branch>
  <branch basename="_ANONYMOUS_BRANCH_8">
    <segment>
      <node>
        <text-node>
          <description>The Stop node makes the job show as ERROR in BM. Standard job notification for ERRORs can be used.</description>
        </text-node>
        <node-display x="10" y="3"/>
      </node>
    </segment>
  </branch>
  <branch basename="ExportOrders">
    <segment>
      <node>
        <start-node call-mode="private" name="ExportOrders" secure="false"/>
        <node-display x="17" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="SearchSystemObject" pipelet-set-identifier="bc_api">
          <config-property key="ObjectType" value="Order"/>
          <config-property key="CaseSensitive" value="false"/>
          <config-property key="SearchExpression" value="exportStatus={1} AND exportAfter&lt;{2}"/>
          <key-binding alias="Orders" key="SearchResult"/>
          <key-binding alias="OrderCount" key="SearchResultCount"/>
          <key-binding alias="null" key="Search1Key"/>
          <key-binding alias="dw.order.Order.EXPORT_STATUS_READY" key="Search1Value"/>
          <key-binding alias="null" key="Search2Key"/>
          <key-binding alias="new Date()" key="Search2Value"/>
          <key-binding alias="null" key="Search3Key"/>
          <key-binding alias="null" key="Search3Value"/>
          <key-binding alias="null" key="Search4Key"/>
          <key-binding alias="null" key="Search4Value"/>
          <key-binding alias="null" key="Search5Key"/>
          <key-binding alias="null" key="Search5Value"/>
          <key-binding alias="&quot;orderNo&quot;" key="SortBy1"/>
          <key-binding alias="1" key="SortBy1Direction"/>
          <key-binding alias="null" key="SortBy2"/>
          <key-binding alias="null" key="SortBy2Direction"/>
          <key-binding alias="null" key="SortBy3"/>
          <key-binding alias="null" key="SortBy3Direction"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <decision-node condition-key="OrderCount==0" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="yes">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="0" y="1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <end-node name="NO_DATA"/>
              <node-display x="0" y="1"/>
            </node>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="1" y="0"/>
          <bend-point relative-to="target" x="1" y="-1"/>
          <bend-point relative-to="target" x="0" y="-1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/GenerateFilenames.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="Task['file-prefix']" key="FilePrefix"/>
          <key-binding alias="Task['temp-folder']" key="TempFolder"/>
          <key-binding alias="File" key="File"/>
          <key-binding alias="RemoteFile" key="RemoteFile"/>
        </pipelet-node>
        <node-display x="0" y="2"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node custom-name="reset ExportStatus" pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="From_0"/>
          <key-binding alias="ExportStatus" key="To_0"/>
          <key-binding alias="null" key="From_1"/>
          <key-binding alias="null" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="Orders.asList()" key="From_0"/>
          <key-binding alias="OrdersBak" key="To_0"/>
          <key-binding alias="null" key="From_1"/>
          <key-binding alias="null" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="ExportOrders" pipelet-set-identifier="bc_api">
          <key-binding alias="File" key="ExportFile"/>
          <key-binding alias="null" key="OverwriteExportFile"/>
          <key-binding alias="Orders" key="Orders"/>
          <key-binding alias="null" key="ErrorCode"/>
          <key-binding alias="null" key="ErrorMsg"/>
          <key-binding alias="null" key="LogFileName"/>
          <key-binding alias="Task['encryption-algorithm']" key="EncryptionAlgorithm"/>
          <key-binding alias="Task['encryption-key']" key="EncryptionKey"/>
          <key-binding alias="ExportStatus" key="Status"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b3" source-connector="error">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="2" y="0"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <key-binding alias="OrdersBak" key="From_0"/>
                <key-binding alias="Orders" key="To_0"/>
                <key-binding alias="null" key="From_1"/>
                <key-binding alias="null" key="To_1"/>
                <key-binding alias="null" key="From_2"/>
                <key-binding alias="null" key="To_2"/>
                <key-binding alias="null" key="From_3"/>
                <key-binding alias="null" key="To_3"/>
                <key-binding alias="null" key="From_4"/>
                <key-binding alias="null" key="To_4"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_5"/>
                <key-binding alias="null" key="From_6"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
              </pipelet-node>
              <node-display x="1" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <call-node start-name-ref="Custom_FeedSteps-MarkOrdersReady"/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in2" target-path="../+1"/>
          </segment>
        </branch>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="OrdersBak" key="From_0"/>
          <key-binding alias="Orders" key="To_0"/>
          <key-binding alias="null" key="From_1"/>
          <key-binding alias="null" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <call-node start-name-ref="Custom_FeedSteps-MarkOrdersReady"/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <decision-node condition-key="ExportStatus.code=='IMPEX-0'" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b4" source-connector="yes">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="0" y="1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <end-node name="SUCCESS"/>
              <node-display x="0" y="1"/>
            </node>
          </segment>
        </branch>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="1" y="0"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="target" x="2" y="-1"/>
          <bend-point relative-to="target" x="0" y="-1"/>
        </transition-display>
      </simple-transition>
      <node>
        <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
        <node-display x="-1" y="2"/>
        <branch basename="b2" source-connector="yes">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="0" y="1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <pipelet-node pipelet-name="SendMail" pipelet-set-identifier="bc_api">
                <key-binding alias="Config.custom.fromEmail" key="MailFrom"/>
                <key-binding alias="&quot;custom/feeds/exporterror_email&quot;" key="MailTemplate"/>
                <key-binding alias="Task['error-email']" key="MailTo"/>
                <key-binding alias="null" key="MailSubject"/>
                <key-binding alias="null" key="LocaleID"/>
                <key-binding alias="null" key="MailCC"/>
                <key-binding alias="null" key="MailBCC"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="../+1"/>
          </segment>
        </branch>
      </node>
      <transition target-connector="in1" target-path="./+1">
        <transition-display>
          <bend-point relative-to="source" x="1" y="0"/>
          <bend-point relative-to="target" x="1" y="0"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="2"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node name="ERROR"/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="MarkOrdersExported">
    <segment>
      <node>
        <start-node call-mode="private" name="MarkOrdersExported" secure="false"/>
        <node-display x="19" y="1"/>
      </node>
      <transition target-connector="in" target-path="./+1">
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <loop-node element-key="Order" iterator-key="Orders"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="do">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="0" y="1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <pipelet-node custom-name="Mark order as exported" pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="true"/>
                <key-binding alias="dw.order.Order.EXPORT_STATUS_EXPORTED" key="From_0"/>
                <key-binding alias="Order.exportStatus" key="To_0"/>
                <key-binding alias="null" key="From_1"/>
                <key-binding alias="null" key="To_1"/>
                <key-binding alias="null" key="From_2"/>
                <key-binding alias="null" key="To_2"/>
                <key-binding alias="null" key="From_3"/>
                <key-binding alias="null" key="To_3"/>
                <key-binding alias="null" key="From_4"/>
                <key-binding alias="null" key="To_4"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_5"/>
                <key-binding alias="null" key="From_6"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="loop" target-path="..">
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
                <bend-point relative-to="source" x="-1" y="1"/>
                <bend-point relative-to="target" x="-1" y="0"/>
              </transition-display>
            </transition>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="1" y="0"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node/>
        <node-display orientation="horizontal" x="1" y="0"/>
      </node>
    </segment>
  </branch>
  <branch basename="_ANONYMOUS_BRANCH_11">
    <segment>
      <node>
        <text-node>
          <description>Find orders that are EXPORT_STATUS_READY and exportAfter &lt; now.</description>
        </text-node>
        <node-display x="16" y="2"/>
      </node>
    </segment>
  </branch>
  <branch basename="ArchiveFeed">
    <segment>
      <node>
        <start-node call-mode="private" name="ArchiveFeed" secure="false"/>
        <node-display x="21" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <decision-node condition-key="Task.id!='startofdayinventoryprodfeed'" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="yes">
          <transition target-connector="in1" target-path="./b3.1"/>
        </branch>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/StringManipulation.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="Task['remote-file-pattern'].substring(0,12)" key="Delimiter"/>
          <key-binding alias="&quot;Shrink&quot;" key="StringToAppend"/>
          <key-binding alias="RemoteFileName" key="FinalString"/>
          <key-binding alias="File" key="StringToManipulate"/>
        </pipelet-node>
        <node-display x="1" y="0"/>
      </node>
      <simple-transition/>
      <node>
        <call-node start-name-ref="Custom_FeedSteps-UploadFeed"/>
        <node-display x="0" y="1"/>
        <branch basename="b3" source-connector="ERROR">
          <transition target-connector="in1"/>
          <segment>
            <node>
              <join-node/>
              <node-display x="-1" y="0"/>
            </node>
            <simple-transition/>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <key-binding alias="false" key="From_0"/>
                <key-binding alias="OriginalFileArchive" key="To_0"/>
                <key-binding alias="File" key="From_1"/>
                <key-binding alias="ShrinkFile" key="To_1"/>
                <key-binding alias="null" key="From_3"/>
                <key-binding alias="null" key="To_3"/>
                <key-binding alias="null" key="From_4"/>
                <key-binding alias="null" key="To_4"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_5"/>
                <key-binding alias="null" key="From_6"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <config-property key="OnError" value="PIPELET_ERROR"/>
                <config-property key="ScriptFile" value="feeds/ArchiveFeed.ds"/>
                <key-binding alias="null" key="ScriptLog"/>
                <key-binding alias="Task['archive-folder'].toString()" key="LocalArchiveFolder"/>
                <key-binding alias="LocalFile" key="LocalFile"/>
                <key-binding alias="File" key="File"/>
                <key-binding alias="archive-location" key="ArchiveFolder"/>
                <key-binding alias="StatusMessage" key="StatusMessage"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="error">
                <transition target-connector="in"/>
                <segment>
                  <node>
                    <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
                    <node-display x="1" y="0"/>
                    <branch basename="b2" source-connector="yes">
                      <transition target-connector="in"/>
                      <segment>
                        <node>
                          <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                            <config-property key="Transactional" value="false"/>
                            <key-binding alias="true" key="From_0"/>
                            <key-binding alias="InstanceReqd" key="To_0"/>
                            <key-binding alias="&quot;feed_archive_error&quot;" key="From_1"/>
                            <key-binding alias="EmailFlow" key="To_1"/>
                            <key-binding alias="null" key="From_5"/>
                            <key-binding alias="null" key="To_5"/>
                            <key-binding alias="null" key="From_6"/>
                            <key-binding alias="null" key="To_6"/>
                            <key-binding alias="null" key="From_7"/>
                            <key-binding alias="null" key="To_7"/>
                            <key-binding alias="null" key="From_8"/>
                            <key-binding alias="null" key="To_8"/>
                            <key-binding alias="null" key="From_9"/>
                            <key-binding alias="null" key="To_9"/>
                            <key-binding alias="Task['error-email']" key="From_2"/>
                            <key-binding alias="MailTo" key="To_2"/>
                            <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                            <key-binding alias="MailParams" key="To_4"/>
                            <key-binding alias="MailSubject" key="To_3"/>
                            <key-binding alias="" key="From_3"/>
                          </pipelet-node>
                          <node-display x="0" y="1"/>
                        </node>
                        <simple-transition/>
                        <node>
                          <call-node start-name-ref="Custom_FeedSteps-ArchiveEmail"/>
                          <node-display x="0" y="1"/>
                        </node>
                        <transition target-connector="in1" target-path="../../+1"/>
                      </segment>
                    </branch>
                  </node>
                  <transition target-connector="in1" target-path="../+1">
                    <transition-display>
                      <bend-point relative-to="source" x="2" y="0"/>
                      <bend-point relative-to="target" x="2" y="0"/>
                    </transition-display>
                  </transition>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="./+1">
              <transition-display>
                <bend-point relative-to="target" x="-2" y="0"/>
              </transition-display>
            </transition>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="1" y="3"/>
            </node>
            <simple-transition/>
            <node>
              <decision-node condition-key="Task.id!='startofdayinventoryprodfeed'" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in1" target-path="./+1"/>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
              </transition-display>
            </simple-transition>
            <node>
              <decision-node condition-key="OriginalFileArchive==false" condition-operator="expr"/>
              <node-display orientation="horizontal" x="1" y="0"/>
              <branch basename="b3" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="1" y="0"/>
                    <bend-point relative-to="target" x="-1" y="0"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="OriginalFileArchive" key="To_0"/>
                      <key-binding alias="FileOriginal" key="From_1"/>
                      <key-binding alias="File" key="To_1"/>
                      <key-binding alias="null" key="From_3"/>
                      <key-binding alias="null" key="To_3"/>
                      <key-binding alias="null" key="From_4"/>
                      <key-binding alias="null" key="To_4"/>
                      <key-binding alias="null" key="From_5"/>
                      <key-binding alias="null" key="To_5"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                    </pipelet-node>
                    <node-display orientation="horizontal" x="1" y="-1"/>
                  </node>
                  <transition target-connector="in1" target-path="../-1">
                    <transition-display>
                      <bend-point relative-to="source" x="1" y="0"/>
                      <bend-point relative-to="source" x="1" y="-1"/>
                      <bend-point relative-to="source" x="-1" y="-1"/>
                      <bend-point relative-to="target" x="5" y="0"/>
                    </transition-display>
                  </transition>
                </segment>
              </branch>
            </node>
            <transition target-connector="in3" target-path="./+1">
              <transition-display>
                <bend-point relative-to="source" x="0" y="2"/>
              </transition-display>
            </transition>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="-1" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <end-node/>
              <node-display x="0" y="1"/>
            </node>
          </segment>
        </branch>
        <branch basename="b4" source-connector="SUCCESS">
          <transition target-connector="in1" target-path="./b3.1"/>
        </branch>
      </node>
    </segment>
  </branch>
  <branch basename="ArchiveEmail">
    <segment>
      <node>
        <start-node call-mode="private" name="ArchiveEmail" secure="false"/>
        <node-display x="24" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;instanceName&quot;,   instanceName)" key="From_9"/>
          <key-binding alias="MailParams.put(&quot;RemoteFile&quot;, RemoteFile)" key="From_8"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;TaskId&quot;, Task.id)" key="From_9"/>
          <key-binding alias="MailParams.put(&quot;FileName&quot;, File)" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;ArchiveFolder&quot;, archive-location)" key="From_8"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;JobConfigurationId&quot;, JobConfigurationID)" key="From_9"/>
          <key-binding alias="MailParams.put(&quot;SiteId&quot;, SiteId)" key="From_8"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="From_0"/>
          <key-binding alias="null" key="To_0"/>
          <key-binding alias="null" key="From_1"/>
          <key-binding alias="null" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="MailParams.put(&quot;StatusMessage&quot;,StatusMessage)" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <call-node start-name-ref="Email-SendMail"/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="_ANONYMOUS_BRANCH_14">
    <segment>
      <node>
        <text-node>
          <description>workaround for APP-12961: convert iterator Orders to List and store in temporary variable</description>
        </text-node>
        <node-display x="16" y="7"/>
      </node>
    </segment>
  </branch>
  <branch basename="DeleteEmail">
    <segment>
      <node>
        <start-node call-mode="private" name="DeleteEmail" secure="false"/>
        <node-display x="6" y="11"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;SiteId&quot;, SiteId)" key="From_2"/>
          <key-binding alias="MailParams.put(&quot;instanceName&quot;,   instanceName)" key="From_3"/>
          <key-binding alias="MailParams.put(&quot;TaskId&quot;, Task.id)" key="From_4"/>
          <key-binding alias="MailParams.put(&quot;remote-folder-url&quot;, Task['remote-folder-url'])" key="From_5"/>
          <key-binding alias="MailParams.put(&quot;RemoteFile&quot;, RemoteFile)" key="From_6"/>
          <key-binding alias="MailParams.put(&quot;remote-login&quot;, Task['remote-login'])" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;remote-password&quot;, Task['remote-password'])" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;JobConfigurationId&quot;, JobConfigurationID)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;remote-folder-url&quot;, Task['remote-folder-url'])" key="From_5"/>
          <key-binding alias="MailParams.put(&quot;TaskId&quot;, Task.id)" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;instanceName&quot;,   instanceName)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;SiteId&quot;, SiteId)" key="From_9"/>
          <key-binding alias="MailParams.put(&quot;RemoteFile&quot;, RemoteFile)" key="From_3"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;remote-folder-url&quot;, Task['remote-folder-url'])" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;RemoteFile&quot;, RemoteFile)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="From_0"/>
          <key-binding alias="null" key="To_0"/>
          <key-binding alias="null" key="From_1"/>
          <key-binding alias="null" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="MailParams.put(&quot;StatusMessage&quot;,StatusMessage)" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <call-node start-name-ref="Email-SendMail"/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="ImportEmail">
    <segment>
      <node>
        <start-node call-mode="private" name="ImportEmail" secure="false"/>
        <node-display x="15" y="11"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;ImportStatus.code&quot;, ImportStatus.code)" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;ImportStatus.message&quot;, ImportStatus.message)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;ImportStatus.details.LogFileName&quot;, ImportStatus.details.LogFileName)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;instanceName&quot;,  instanceName)" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;SiteId&quot;, SiteId)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;JobConfigurationId&quot;, JobConfigurationID)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;import-mode&quot;, Task['import-mode'])" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;FileName&quot;, File)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;TaskId&quot;, Task.id)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;ImportRuntime&quot;, ImportRuntime/1000)" key="From_9"/>
          <key-binding alias="MailParams.put(&quot;DataErrorCount&quot;, ImportStatus.details.DataErrorCount)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;DataWarningCount&quot;, nonSuppressDataWarningCount)" key="From_7"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <call-node start-name-ref="Email-SendMail"/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="_ANONYMOUS_BRANCH_17">
    <segment>
      <node>
        <text-node>
          <description>workaround for APP-12961: restore Orders</description>
        </text-node>
        <node-display x="16" y="9"/>
      </node>
    </segment>
  </branch>
  <branch basename="_ANONYMOUS_BRANCH_18">
    <segment>
      <node>
        <text-node>
          <description>workaround for APP-11786: mark orders as EXPORT_STATUS_READY again (orders will remain in that state if upload fails)</description>
        </text-node>
        <node-display x="16" y="10"/>
      </node>
    </segment>
  </branch>
  <branch basename="MarkOrdersReady">
    <segment>
      <node>
        <start-node call-mode="private" name="MarkOrdersReady" secure="false"/>
        <node-display x="19" y="10"/>
      </node>
      <transition target-connector="in" target-path="./+1">
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <loop-node element-key="Order" iterator-key="Orders"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="do">
          <transition target-connector="in"/>
          <segment>
            <node>
              <pipelet-node custom-name="Mark order EXPORT_STATUS_READY" pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="true"/>
                <key-binding alias="dw.order.Order.EXPORT_STATUS_READY" key="From_0"/>
                <key-binding alias="Order.exportStatus" key="To_0"/>
                <key-binding alias="null" key="From_1"/>
                <key-binding alias="null" key="To_1"/>
                <key-binding alias="null" key="From_2"/>
                <key-binding alias="null" key="To_2"/>
                <key-binding alias="null" key="From_3"/>
                <key-binding alias="null" key="To_3"/>
                <key-binding alias="null" key="From_4"/>
                <key-binding alias="null" key="To_4"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_5"/>
                <key-binding alias="null" key="From_6"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="loop" target-path="..">
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
                <bend-point relative-to="source" x="-1" y="1"/>
                <bend-point relative-to="target" x="-1" y="0"/>
              </transition-display>
            </transition>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="1" y="0"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node/>
        <node-display orientation="horizontal" x="1" y="0"/>
      </node>
    </segment>
  </branch>
  <branch basename="UploadFeed">
    <segment>
      <node>
        <start-node call-mode="private" name="UploadFeed" secure="false"/>
        <node-display x="0" y="14"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/UploadFeed.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="Task['remote-folder-url']" key="RemoteFolderURL"/>
          <key-binding alias="Task['remote-login']" key="RemoteLogin"/>
          <key-binding alias="Task['remote-password']" key="RemotePassword"/>
          <key-binding alias="File" key="File"/>
          <key-binding alias="RemoteFileName" key="RemoteFile"/>
          <key-binding alias="StatusMessage" key="StatusMessage"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="error">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="2" y="0"/>
              <bend-point relative-to="target" x="2" y="-1"/>
              <bend-point relative-to="target" x="0" y="-1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
              <node-display x="0" y="6"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in"/>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="InstanceReqd" key="To_0"/>
                      <key-binding alias="&quot;feed_upload_error&quot;" key="From_1"/>
                      <key-binding alias="EmailFlow" key="To_1"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="Task['error-email']" key="From_2"/>
                      <key-binding alias="MailTo" key="To_2"/>
                      <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                      <key-binding alias="MailParams" key="To_4"/>
                      <key-binding alias="MailSubject" key="To_3"/>
                      <key-binding alias="" key="From_3"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="null" key="From_0"/>
                      <key-binding alias="null" key="To_0"/>
                      <key-binding alias="null" key="From_1"/>
                      <key-binding alias="null" key="To_1"/>
                      <key-binding alias="null" key="From_2"/>
                      <key-binding alias="null" key="To_2"/>
                      <key-binding alias="null" key="From_3"/>
                      <key-binding alias="null" key="To_3"/>
                      <key-binding alias="null" key="From_4"/>
                      <key-binding alias="null" key="To_4"/>
                      <key-binding alias="null" key="From_5"/>
                      <key-binding alias="null" key="To_5"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="MailParams.put(&quot;StatusMessage&quot;,StatusMessage)" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-UploadEmail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../+1"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="./+1">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="target" x="1" y="0"/>
              </transition-display>
            </transition>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="4"/>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
              </transition-display>
            </simple-transition>
            <node>
              <decision-node condition-key="Task['on-temporary-error']!='FAIL'" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <end-node name="ERROR"/>
                    <node-display x="0" y="1"/>
                  </node>
                </segment>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
              </transition-display>
            </simple-transition>
            <node>
              <stop-node/>
              <node-display orientation="horizontal" x="1" y="0"/>
            </node>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <decision-node condition-key="!empty(Task['success-email']) &amp;&amp; !empty(Config.custom.fromEmail) &amp;&amp; Task['send-success-email']=='TRUE'" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b3" source-connector="yes">
          <transition target-connector="in"/>
          <segment>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <key-binding alias="true" key="From_0"/>
                <key-binding alias="InstanceReqd" key="To_0"/>
                <key-binding alias="&quot;feed_upload_success&quot;" key="From_1"/>
                <key-binding alias="EmailFlow" key="To_1"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
                <key-binding alias="Task['success-email']" key="From_2"/>
                <key-binding alias="MailTo" key="To_2"/>
                <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                <key-binding alias="MailParams" key="To_4"/>
                <key-binding alias="MailSubject" key="To_3"/>
                <key-binding alias="" key="From_3"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <call-node start-name-ref="Custom_FeedSteps-UploadEmail"/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="../+1"/>
          </segment>
        </branch>
      </node>
      <transition target-connector="in1" target-path="./+1">
        <transition-display>
          <bend-point relative-to="source" x="1" y="0"/>
          <bend-point relative-to="target" x="1" y="0"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="3"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node name="SUCCESS"/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="RunTypeSpecificImport">
    <segment>
      <node>
        <start-node call-mode="private" name="RunTypeSpecificImport" secure="false"/>
        <node-display x="11" y="14"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node custom-name="get ImportStartTime" pipelet-name="Eval" pipelet-set-identifier="bc_api">
          <config-property key="OnError" value="null"/>
          <config-property key="Transactional" value="false"/>
          <config-property key="Expression" value="new Date().getTime()"/>
          <key-binding alias="ImportStartTime" key="Result"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <decision-node condition-key="Task['task-type']!='ActiveData'" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="yes">
          <transition target-connector="in"/>
          <segment>
            <node>
              <decision-node condition-key="Task['task-type']!='Catalog'" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in"/>
                <segment>
                  <node>
                    <decision-node condition-key="Task['task-type']!='Content'" condition-operator="expr"/>
                    <node-display x="0" y="1"/>
                    <branch basename="b2" source-connector="yes">
                      <transition target-connector="in"/>
                      <segment>
                        <node>
                          <decision-node condition-key="Task['task-type']!='Coupons'" condition-operator="expr"/>
                          <node-display x="0" y="1"/>
                          <branch basename="b2" source-connector="yes">
                            <transition target-connector="in"/>
                            <segment>
                              <node>
                                <decision-node condition-key="Task['task-type']!='CustomObjects'" condition-operator="expr"/>
                                <node-display x="0" y="1"/>
                                <branch basename="b2" source-connector="yes">
                                  <transition target-connector="in"/>
                                  <segment>
                                    <node>
                                      <decision-node condition-key="Task['task-type']!='Customers'" condition-operator="expr"/>
                                      <node-display x="0" y="1"/>
                                      <branch basename="b2" source-connector="yes">
                                        <transition target-connector="in"/>
                                        <segment>
                                          <node>
                                            <decision-node condition-key="Task['task-type']!='GiftCertificates'" condition-operator="expr"/>
                                            <node-display x="0" y="1"/>
                                            <branch basename="b2" source-connector="yes">
                                              <transition target-connector="in"/>
                                              <segment>
                                                <node>
                                                  <decision-node condition-key="Task['task-type']!=&quot;Inventory&quot;" condition-operator="expr"/>
                                                  <node-display x="0" y="1"/>
                                                  <branch basename="b2" source-connector="yes">
                                                    <transition target-connector="in">
                                                      <transition-display>
                                                        <bend-point relative-to="source" x="0" y="1"/>
                                                      </transition-display>
                                                    </transition>
                                                    <segment>
                                                      <node>
                                                        <decision-node condition-key="Task['task-type']!=&quot;Price&quot;" condition-operator="expr"/>
                                                        <node-display x="0" y="1"/>
                                                        <branch basename="b2" source-connector="yes">
                                                          <transition target-connector="in"/>
                                                          <segment>
                                                            <node>
                                                              <decision-node condition-key="Task['task-type']!=&quot;Promotions&quot;" condition-operator="expr"/>
                                                              <node-display x="0" y="1"/>
                                                              <branch basename="b2" source-connector="yes">
                                                                <transition target-connector="in"/>
                                                                <segment>
                                                                  <node>
                                                                    <decision-node condition-key="Task['task-type']!='ShippingMethods'" condition-operator="expr"/>
                                                                    <node-display x="0" y="1"/>
                                                                    <branch basename="b2" source-connector="yes">
                                                                      <transition target-connector="in"/>
                                                                      <segment>
                                                                        <node>
                                                                          <decision-node condition-key="Task['task-type']!='Slots'" condition-operator="expr"/>
                                                                          <node-display x="0" y="1"/>
                                                                          <branch basename="b2" source-connector="yes">
                                                                            <transition target-connector="in"/>
                                                                            <segment>
                                                                              <node>
                                                                                <decision-node condition-key="Task['task-type']!='SourceCodes'" condition-operator="expr"/>
                                                                                <node-display x="0" y="1"/>
                                                                                <branch basename="b2" source-connector="yes">
                                                                                  <transition target-connector="in">
                                                                                    <transition-display>
                                                                                      <bend-point relative-to="source" x="0" y="1"/>
                                                                                    </transition-display>
                                                                                  </transition>
                                                                                  <segment>
                                                                                    <node>
                                                                                      <decision-node condition-key="Task['task-type']!='Stores'" condition-operator="expr"/>
                                                                                      <node-display x="0" y="1"/>
                                                                                      <branch basename="b2" source-connector="yes">
                                                                                        <transition target-connector="in">
                                                                                          <transition-display>
                                                                                            <bend-point relative-to="source" x="0" y="1"/>
                                                                                          </transition-display>
                                                                                        </transition>
                                                                                        <segment>
                                                                                          <node>
                                                                                            <decision-node condition-key="Task['task-type']!='TaxTable'" condition-operator="expr"/>
                                                                                            <node-display x="0" y="1"/>
                                                                                            <branch basename="b2" source-connector="yes">
                                                                                              <transition target-connector="in">
                                                                                                <transition-display>
                                                                                                  <bend-point relative-to="source" x="0" y="1"/>
                                                                                                </transition-display>
                                                                                              </transition>
                                                                                              <segment>
                                                                                                <node>
                                                                                                  <stop-node/>
                                                                                                  <node-display x="0" y="1"/>
                                                                                                </node>
                                                                                              </segment>
                                                                                            </branch>
                                                                                          </node>
                                                                                          <simple-transition/>
                                                                                          <node>
                                                                                            <pipelet-node pipelet-name="ImportTaxTable" pipelet-set-identifier="bc_api">
                                                                                              <key-binding alias="File" key="ImportFile"/>
                                                                                              <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                                                                              <key-binding alias="null" key="ErrorCode"/>
                                                                                              <key-binding alias="null" key="ErrorMsg"/>
                                                                                              <key-binding alias="null" key="LogFileName"/>
                                                                                              <key-binding alias="ImportStatus" key="Status"/>
                                                                                            </pipelet-node>
                                                                                            <node-display orientation="horizontal" x="1" y="0"/>
                                                                                            <branch basename="b3" source-connector="error">
                                                                                              <transition target-connector="in2" target-path="../../../../../../../../../../../../../../b3.14">
                                                                                                <transition-display>
                                                                                                  <bend-point relative-to="target" x="-1" y="-1"/>
                                                                                                </transition-display>
                                                                                              </transition>
                                                                                            </branch>
                                                                                          </node>
                                                                                          <transition target-connector="in2" target-path="../../../../../../../../../../../../../../+14"/>
                                                                                        </segment>
                                                                                      </branch>
                                                                                    </node>
                                                                                    <simple-transition/>
                                                                                    <node>
                                                                                      <pipelet-node pipelet-name="ImportStores" pipelet-set-identifier="bc_api">
                                                                                        <key-binding alias="File" key="ImportFile"/>
                                                                                        <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                                                                        <key-binding alias="null" key="ErrorCode"/>
                                                                                        <key-binding alias="null" key="ErrorMsg"/>
                                                                                        <key-binding alias="null" key="LogFileName"/>
                                                                                        <key-binding alias="ImportStatus" key="Status"/>
                                                                                      </pipelet-node>
                                                                                      <node-display orientation="horizontal" x="1" y="0"/>
                                                                                      <branch basename="b3" source-connector="error">
                                                                                        <transition target-connector="in2" target-path="../../../../../../../../../../../../../b3.13">
                                                                                          <transition-display>
                                                                                            <bend-point relative-to="source" x="0" y="1"/>
                                                                                            <bend-point relative-to="target" x="-1" y="-1"/>
                                                                                          </transition-display>
                                                                                        </transition>
                                                                                      </branch>
                                                                                    </node>
                                                                                    <transition target-connector="in2" target-path="../../../../../../../../../../../../../+13"/>
                                                                                  </segment>
                                                                                </branch>
                                                                              </node>
                                                                              <simple-transition/>
                                                                              <node>
                                                                                <pipelet-node pipelet-name="ImportSourceCodes" pipelet-set-identifier="bc_api">
                                                                                  <key-binding alias="File" key="ImportFile"/>
                                                                                  <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                                                                  <key-binding alias="null" key="ErrorCode"/>
                                                                                  <key-binding alias="null" key="ErrorMsg"/>
                                                                                  <key-binding alias="null" key="LogFileName"/>
                                                                                  <key-binding alias="ImportStatus" key="Status"/>
                                                                                </pipelet-node>
                                                                                <node-display orientation="horizontal" x="1" y="0"/>
                                                                                <branch basename="b3" source-connector="error">
                                                                                  <transition target-connector="in2" target-path="../../../../../../../../../../../../b3.12">
                                                                                    <transition-display>
                                                                                      <bend-point relative-to="source" x="0" y="1"/>
                                                                                      <bend-point relative-to="target" x="-1" y="-1"/>
                                                                                    </transition-display>
                                                                                  </transition>
                                                                                </branch>
                                                                              </node>
                                                                              <transition target-connector="in2" target-path="../../../../../../../../../../../../+12"/>
                                                                            </segment>
                                                                          </branch>
                                                                        </node>
                                                                        <simple-transition/>
                                                                        <node>
                                                                          <pipelet-node pipelet-name="ImportSlots" pipelet-set-identifier="bc_api">
                                                                            <key-binding alias="File" key="ImportFile"/>
                                                                            <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                                                            <key-binding alias="null" key="ErrorCode"/>
                                                                            <key-binding alias="null" key="ErrorMsg"/>
                                                                            <key-binding alias="null" key="LogFileName"/>
                                                                            <key-binding alias="ImportStatus" key="Status"/>
                                                                          </pipelet-node>
                                                                          <node-display orientation="horizontal" x="1" y="0"/>
                                                                          <branch basename="b3" source-connector="error">
                                                                            <transition target-connector="in2" target-path="../../../../../../../../../../../b3.11">
                                                                              <transition-display>
                                                                                <bend-point relative-to="source" x="0" y="1"/>
                                                                                <bend-point relative-to="target" x="-1" y="-1"/>
                                                                              </transition-display>
                                                                            </transition>
                                                                          </branch>
                                                                        </node>
                                                                        <transition target-connector="in2" target-path="../../../../../../../../../../../+11"/>
                                                                      </segment>
                                                                    </branch>
                                                                  </node>
                                                                  <simple-transition/>
                                                                  <node>
                                                                    <pipelet-node pipelet-name="ImportShippingMethods" pipelet-set-identifier="bc_api">
                                                                      <key-binding alias="File" key="ImportFile"/>
                                                                      <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                                                      <key-binding alias="null" key="ErrorCode"/>
                                                                      <key-binding alias="null" key="ErrorMsg"/>
                                                                      <key-binding alias="null" key="LogFileName"/>
                                                                      <key-binding alias="ImportStatus" key="Status"/>
                                                                    </pipelet-node>
                                                                    <node-display orientation="horizontal" x="1" y="0"/>
                                                                    <branch basename="b3" source-connector="error">
                                                                      <transition target-connector="in2" target-path="../../../../../../../../../../b3.10">
                                                                        <transition-display>
                                                                          <bend-point relative-to="source" x="0" y="1"/>
                                                                          <bend-point relative-to="target" x="-1" y="-1"/>
                                                                        </transition-display>
                                                                      </transition>
                                                                    </branch>
                                                                  </node>
                                                                  <transition target-connector="in2" target-path="../../../../../../../../../../+10"/>
                                                                </segment>
                                                              </branch>
                                                            </node>
                                                            <simple-transition/>
                                                            <node>
                                                              <pipelet-node pipelet-name="ImportPromotions" pipelet-set-identifier="bc_api">
                                                                <key-binding alias="File" key="ImportFile"/>
                                                                <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                                                <key-binding alias="null" key="ErrorCode"/>
                                                                <key-binding alias="null" key="ErrorMsg"/>
                                                                <key-binding alias="null" key="LogFileName"/>
                                                                <key-binding alias="ImportStatus" key="Status"/>
                                                              </pipelet-node>
                                                              <node-display orientation="horizontal" x="1" y="0"/>
                                                              <branch basename="b3" source-connector="error">
                                                                <transition target-connector="in2" target-path="../../../../../../../../../b3.9">
                                                                  <transition-display>
                                                                    <bend-point relative-to="source" x="0" y="1"/>
                                                                    <bend-point relative-to="target" x="-1" y="-1"/>
                                                                  </transition-display>
                                                                </transition>
                                                              </branch>
                                                            </node>
                                                            <transition target-connector="in2" target-path="../../../../../../../../../+9"/>
                                                          </segment>
                                                        </branch>
                                                      </node>
                                                      <simple-transition/>
                                                      <node>
                                                        <pipelet-node pipelet-name="ImportPriceBooks" pipelet-set-identifier="bc_api">
                                                          <key-binding alias="File" key="ImportFile"/>
                                                          <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                                          <key-binding alias="null" key="ErrorCode"/>
                                                          <key-binding alias="null" key="ErrorMsg"/>
                                                          <key-binding alias="null" key="LogFileName"/>
                                                          <key-binding alias="ImportStatus" key="Status"/>
                                                        </pipelet-node>
                                                        <node-display orientation="horizontal" x="1" y="0"/>
                                                        <branch basename="b3" source-connector="error">
                                                          <transition target-connector="in1" target-path="../../../../../../../../b3.8">
                                                            <transition-display>
                                                              <bend-point relative-to="source" x="0" y="1"/>
                                                              <bend-point relative-to="target" x="-1" y="-1"/>
                                                            </transition-display>
                                                          </transition>
                                                        </branch>
                                                      </node>
                                                      <transition target-connector="in1" target-path="../../../../../../../../+8"/>
                                                    </segment>
                                                  </branch>
                                                </node>
                                                <simple-transition/>
                                                <node>
                                                  <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                                                    <config-property key="Transactional" value="true"/>
                                                    <key-binding alias="&quot;Initiated&quot;" key="From_0"/>
                                                    <key-binding alias="dw.system.Site.getCurrent().preferences.custom.SODFeed_Status" key="To_0"/>
                                                    <key-binding alias="null" key="From_1"/>
                                                    <key-binding alias="null" key="To_1"/>
                                                    <key-binding alias="null" key="From_2"/>
                                                    <key-binding alias="null" key="To_2"/>
                                                    <key-binding alias="null" key="From_3"/>
                                                    <key-binding alias="null" key="To_3"/>
                                                    <key-binding alias="null" key="From_4"/>
                                                    <key-binding alias="null" key="To_4"/>
                                                    <key-binding alias="null" key="From_5"/>
                                                    <key-binding alias="null" key="To_5"/>
                                                    <key-binding alias="null" key="From_6"/>
                                                    <key-binding alias="null" key="To_6"/>
                                                    <key-binding alias="null" key="From_7"/>
                                                    <key-binding alias="null" key="To_7"/>
                                                    <key-binding alias="null" key="From_8"/>
                                                    <key-binding alias="null" key="To_8"/>
                                                    <key-binding alias="null" key="From_9"/>
                                                    <key-binding alias="null" key="To_9"/>
                                                  </pipelet-node>
                                                  <node-display orientation="horizontal" x="1" y="0"/>
                                                </node>
                                                <simple-transition>
                                                  <transition-display>
                                                    <bend-point relative-to="source" x="1" y="0"/>
                                                  </transition-display>
                                                </simple-transition>
                                                <node>
                                                  <pipelet-node pipelet-name="ImportInventoryLists" pipelet-set-identifier="bc_api">
                                                    <key-binding alias="File" key="ImportFile"/>
                                                    <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                                    <key-binding alias="null" key="ErrorCode"/>
                                                    <key-binding alias="null" key="ErrorMsg"/>
                                                    <key-binding alias="null" key="LogFileName"/>
                                                    <key-binding alias="ImportStatus" key="Status"/>
                                                  </pipelet-node>
                                                  <node-display orientation="horizontal" x="1" y="0"/>
                                                  <branch basename="b3" source-connector="error">
                                                    <transition target-connector="in"/>
                                                    <segment>
                                                      <node>
                                                        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                                                          <config-property key="Transactional" value="true"/>
                                                          <key-binding alias="&quot;Error&quot;" key="From_0"/>
                                                          <key-binding alias="dw.system.Site.getCurrent().preferences.custom.SODFeed_Status" key="To_0"/>
                                                          <key-binding alias="null" key="From_1"/>
                                                          <key-binding alias="null" key="To_1"/>
                                                          <key-binding alias="null" key="From_2"/>
                                                          <key-binding alias="null" key="To_2"/>
                                                          <key-binding alias="null" key="From_3"/>
                                                          <key-binding alias="null" key="To_3"/>
                                                          <key-binding alias="null" key="From_4"/>
                                                          <key-binding alias="null" key="To_4"/>
                                                          <key-binding alias="null" key="From_5"/>
                                                          <key-binding alias="null" key="To_5"/>
                                                          <key-binding alias="null" key="From_6"/>
                                                          <key-binding alias="null" key="To_6"/>
                                                          <key-binding alias="null" key="From_7"/>
                                                          <key-binding alias="null" key="To_7"/>
                                                          <key-binding alias="null" key="From_8"/>
                                                          <key-binding alias="null" key="To_8"/>
                                                          <key-binding alias="null" key="From_9"/>
                                                          <key-binding alias="null" key="To_9"/>
                                                        </pipelet-node>
                                                        <node-display x="0" y="1"/>
                                                      </node>
                                                      <transition target-connector="in1" target-path="../../../../../../../../b3.7"/>
                                                    </segment>
                                                  </branch>
                                                </node>
                                                <simple-transition>
                                                  <transition-display>
                                                    <bend-point relative-to="source" x="1" y="0"/>
                                                  </transition-display>
                                                </simple-transition>
                                                <node>
                                                  <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                                                    <config-property key="Transactional" value="true"/>
                                                    <key-binding alias="&quot;Success&quot;" key="From_0"/>
                                                    <key-binding alias="dw.system.Site.getCurrent().preferences.custom.SODFeed_Status" key="To_0"/>
                                                    <key-binding alias="null" key="From_1"/>
                                                    <key-binding alias="null" key="To_1"/>
                                                    <key-binding alias="null" key="From_2"/>
                                                    <key-binding alias="null" key="To_2"/>
                                                    <key-binding alias="null" key="From_3"/>
                                                    <key-binding alias="null" key="To_3"/>
                                                    <key-binding alias="null" key="From_4"/>
                                                    <key-binding alias="null" key="To_4"/>
                                                    <key-binding alias="null" key="From_5"/>
                                                    <key-binding alias="null" key="To_5"/>
                                                    <key-binding alias="null" key="From_6"/>
                                                    <key-binding alias="null" key="To_6"/>
                                                    <key-binding alias="null" key="From_7"/>
                                                    <key-binding alias="null" key="To_7"/>
                                                    <key-binding alias="null" key="From_8"/>
                                                    <key-binding alias="null" key="To_8"/>
                                                    <key-binding alias="null" key="From_9"/>
                                                    <key-binding alias="null" key="To_9"/>
                                                  </pipelet-node>
                                                  <node-display orientation="horizontal" x="1" y="0"/>
                                                </node>
                                                <transition target-connector="in2" target-path="../../../../../../../+7"/>
                                              </segment>
                                            </branch>
                                          </node>
                                          <simple-transition/>
                                          <node>
                                            <pipelet-node pipelet-name="ImportGiftCertificates" pipelet-set-identifier="bc_api">
                                              <key-binding alias="File" key="ImportFile"/>
                                              <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                              <key-binding alias="null" key="ErrorCode"/>
                                              <key-binding alias="null" key="ErrorMsg"/>
                                              <key-binding alias="null" key="LogFileName"/>
                                              <key-binding alias="ImportStatus" key="Status"/>
                                            </pipelet-node>
                                            <node-display orientation="horizontal" x="1" y="0"/>
                                            <branch basename="b3" source-connector="error">
                                              <transition target-connector="in2" target-path="../../../../../../b3.6"/>
                                            </branch>
                                          </node>
                                          <transition target-connector="in2" target-path="../../../../../../+6"/>
                                        </segment>
                                      </branch>
                                    </node>
                                    <simple-transition/>
                                    <node>
                                      <pipelet-node pipelet-name="ImportCustomers" pipelet-set-identifier="bc_api">
                                        <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                        <key-binding alias="File" key="ImportFile"/>
                                        <key-binding alias="null" key="ErrorCode"/>
                                        <key-binding alias="null" key="ErrorMsg"/>
                                        <key-binding alias="null" key="LogFileName"/>
                                        <key-binding alias="ImportStatus" key="Status"/>
                                      </pipelet-node>
                                      <node-display orientation="horizontal" x="1" y="0"/>
                                      <branch basename="b3" source-connector="error">
                                        <transition target-connector="in2" target-path="../../../../../b3.5">
                                          <transition-display>
                                            <bend-point relative-to="source" x="0" y="1"/>
                                            <bend-point relative-to="target" x="-1" y="-1"/>
                                          </transition-display>
                                        </transition>
                                      </branch>
                                    </node>
                                    <transition target-connector="in2" target-path="../../../../../+5"/>
                                  </segment>
                                </branch>
                              </node>
                              <simple-transition/>
                              <node>
                                <pipelet-node pipelet-name="ImportCustomObjects" pipelet-set-identifier="bc_api">
                                  <key-binding alias="File" key="ImportFile"/>
                                  <key-binding alias="Task['import-mode']" key="ImportMode"/>
                                  <key-binding alias="null" key="ErrorCode"/>
                                  <key-binding alias="null" key="ErrorMsg"/>
                                  <key-binding alias="null" key="LogFileName"/>
                                  <key-binding alias="ImportStatus" key="Status"/>
                                </pipelet-node>
                                <node-display orientation="horizontal" x="1" y="0"/>
                                <branch basename="b3" source-connector="error">
                                  <transition target-connector="in2" target-path="../../../../b3.4">
                                    <transition-display>
                                      <bend-point relative-to="source" x="0" y="1"/>
                                      <bend-point relative-to="target" x="-1" y="-1"/>
                                    </transition-display>
                                  </transition>
                                </branch>
                              </node>
                              <transition target-connector="in2" target-path="../../../../+4"/>
                            </segment>
                          </branch>
                        </node>
                        <simple-transition/>
                        <node>
                          <pipelet-node pipelet-name="ImportCoupons" pipelet-set-identifier="bc_api">
                            <key-binding alias="File" key="ImportFile"/>
                            <key-binding alias="Task['import-mode']" key="ImportMode"/>
                            <key-binding alias="null" key="ErrorCode"/>
                            <key-binding alias="null" key="ErrorMsg"/>
                            <key-binding alias="null" key="LogFileName"/>
                            <key-binding alias="ImportStatus" key="Status"/>
                          </pipelet-node>
                          <node-display orientation="horizontal" x="1" y="0"/>
                          <branch basename="b3" source-connector="error">
                            <transition target-connector="in2" target-path="../../../b3.3">
                              <transition-display>
                                <bend-point relative-to="source" x="0" y="1"/>
                                <bend-point relative-to="target" x="-1" y="-1"/>
                              </transition-display>
                            </transition>
                          </branch>
                        </node>
                        <transition target-connector="in2" target-path="../../../+3"/>
                      </segment>
                    </branch>
                  </node>
                  <simple-transition/>
                  <node>
                    <pipelet-node pipelet-name="ImportContent" pipelet-set-identifier="bc_api">
                      <key-binding alias="File" key="ImportFile"/>
                      <key-binding alias="Task['import-mode']" key="ImportMode"/>
                      <key-binding alias="dw.content.ContentMgr.getSiteLibrary()" key="Library"/>
                      <key-binding alias="null" key="ErrorCode"/>
                      <key-binding alias="null" key="ErrorMsg"/>
                      <key-binding alias="null" key="LogFileName"/>
                      <key-binding alias="ImportStatus" key="Status"/>
                    </pipelet-node>
                    <node-display orientation="horizontal" x="1" y="0"/>
                    <branch basename="b3" source-connector="error">
                      <transition target-connector="in2" target-path="../../b3.2">
                        <transition-display>
                          <bend-point relative-to="source" x="0" y="1"/>
                          <bend-point relative-to="target" x="-1" y="-1"/>
                        </transition-display>
                      </transition>
                    </branch>
                  </node>
                  <transition target-connector="in2" target-path="../../+2"/>
                </segment>
              </branch>
            </node>
            <simple-transition/>
            <node>
              <pipelet-node pipelet-name="ImportCatalog" pipelet-set-identifier="bc_api">
                <key-binding alias="File" key="ImportFile"/>
                <key-binding alias="Task['import-mode']" key="ImportMode"/>
                <key-binding alias="null" key="ErrorCode"/>
                <key-binding alias="null" key="ErrorMsg"/>
                <key-binding alias="null" key="LogFileName"/>
                <key-binding alias="ImportStatus" key="Status"/>
                <key-binding alias="null" key="ImportConfiguration"/>
              </pipelet-node>
              <node-display orientation="horizontal" x="1" y="0"/>
              <branch basename="b3" source-connector="error">
                <transition target-connector="in1" target-path="../b3.1">
                  <transition-display>
                    <bend-point relative-to="source" x="2" y="1"/>
                  </transition-display>
                </transition>
              </branch>
            </node>
            <transition target-connector="in1" target-path="../+1"/>
          </segment>
        </branch>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="ImportActiveData" pipelet-set-identifier="bc_api">
          <key-binding alias="File" key="ImportFile"/>
          <key-binding alias="null" key="ErrorCode"/>
          <key-binding alias="null" key="ErrorMsg"/>
          <key-binding alias="null" key="LogFileName"/>
          <key-binding alias="ImportStatus" key="Status"/>
        </pipelet-node>
        <node-display orientation="horizontal" x="1" y="0"/>
        <branch basename="b3" source-connector="error">
          <transition target-connector="in2">
            <transition-display>
              <bend-point relative-to="source" x="3" y="1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <join-node/>
              <node-display x="2" y="2"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="2" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="-2" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="./+1"/>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <pipelet-node custom-name="calculate ImportRuntime" pipelet-name="Eval" pipelet-set-identifier="bc_api">
                <config-property key="OnError" value="null"/>
                <config-property key="Transactional" value="false"/>
                <config-property key="Expression" value="new Date().getTime()-ImportStartTime"/>
                <key-binding alias="ImportRuntime" key="Result"/>
              </pipelet-node>
              <node-display orientation="horizontal" x="1" y="0"/>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
              </transition-display>
            </simple-transition>
            <node>
              <end-node name="PROCESS_ERROR"/>
              <node-display x="0" y="1"/>
            </node>
          </segment>
        </branch>
      </node>
      <transition target-connector="in2" target-path="./+1">
        <transition-display>
          <bend-point relative-to="target" x="0" y="-1"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="1" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="2" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="-2" y="2"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <decision-node condition-key="Task.id!='iaafeed'" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="yes">
          <transition target-connector="in2" target-path="./+1"/>
        </branch>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="true"/>
          <key-binding alias="new Date()" key="From_0"/>
          <key-binding alias="dw.system.Site.getCurrent().preferences.custom.IAASuccessTime" key="To_0"/>
          <key-binding alias="null" key="From_1"/>
          <key-binding alias="null" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="1" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="-1" y="0"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node custom-name="calculate ImportRuntime" pipelet-name="Eval" pipelet-set-identifier="bc_api">
          <config-property key="OnError" value="null"/>
          <config-property key="Transactional" value="false"/>
          <config-property key="Expression" value="new Date().getTime()-ImportStartTime"/>
          <key-binding alias="ImportRuntime" key="Result"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node name="PROCESS_SUCCESS"/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="ModifyMasterCatalogForIE">
    <segment>
      <node>
        <start-node call-mode="private" name="ModifyMasterCatalogForIE" secure="false"/>
        <node-display x="20" y="14"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/ModifyMasterCatalog.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="File" key="File"/>
          <key-binding alias="NewFile" key="NewFile"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="error">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="1" y="0"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
              <node-display orientation="horizontal" x="1" y="0"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="2" y="0"/>
                    <bend-point relative-to="target" x="0" y="-1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="InstanceReqd" key="To_0"/>
                      <key-binding alias="&quot;ie_catalogfeed_modify_error&quot;" key="From_1"/>
                      <key-binding alias="EmailFlow" key="To_1"/>
                      <key-binding alias="null" key="From_5"/>
                      <key-binding alias="null" key="To_5"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="Task['error-email']" key="From_2"/>
                      <key-binding alias="MailTo" key="To_2"/>
                      <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                      <key-binding alias="MailParams" key="To_4"/>
                      <key-binding alias="MailSubject" key="To_3"/>
                      <key-binding alias="" key="From_3"/>
                    </pipelet-node>
                    <node-display x="1" y="1"/>
                  </node>
                  <simple-transition/>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="MailParams.put(&quot;FileName&quot;, File)" key="From_9"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition/>
                  <node>
                    <call-node start-name-ref="Email-SendMail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../../+1">
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="2"/>
                    </transition-display>
                  </transition>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="../+1">
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
                <bend-point relative-to="source" x="1" y="1"/>
                <bend-point relative-to="target" x="1" y="0"/>
              </transition-display>
            </transition>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/ArchiveFeed.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="'archive' + dw.io.File.SEPARATOR  + 'org_master_catalog'" key="ArchiveFolder"/>
          <key-binding alias="File" key="File"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b3" source-connector="error">
          <transition target-connector="in"/>
          <segment>
            <node>
              <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
              <node-display x="1" y="0"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="InstanceReqd" key="To_0"/>
                      <key-binding alias="&quot;feed_archive_error&quot;" key="From_1"/>
                      <key-binding alias="EmailFlow" key="To_1"/>
                      <key-binding alias="null" key="From_5"/>
                      <key-binding alias="null" key="To_5"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="Task['error-email']" key="From_2"/>
                      <key-binding alias="MailTo" key="To_2"/>
                      <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                      <key-binding alias="MailParams" key="To_4"/>
                      <key-binding alias="MailSubject" key="To_3"/>
                      <key-binding alias="" key="From_3"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-ArchiveEmail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../../+1"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="../+1">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="target" x="1" y="0"/>
              </transition-display>
            </transition>
          </segment>
        </branch>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="NewFile" key="From_0"/>
          <key-binding alias="File" key="To_0"/>
          <key-binding alias="null" key="From_1"/>
          <key-binding alias="null" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1">
        <transition-display>
          <bend-point relative-to="target" x="-2" y="0"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="1" y="2"/>
      </node>
      <simple-transition/>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="SendIncorrectTimeStampMail">
    <segment>
      <node>
        <start-node call-mode="private" name="SendIncorrectTimeStampMail" secure="false"/>
        <node-display x="7" y="19"/>
      </node>
      <simple-transition/>
      <node>
        <decision-node condition-key="!empty(Task['error-email'])" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="yes">
          <transition target-connector="in"/>
          <segment>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <key-binding alias="true" key="From_0"/>
                <key-binding alias="InstanceReqd" key="To_0"/>
                <key-binding alias="&quot;BatchJobTimeStampMail&quot;" key="From_1"/>
                <key-binding alias="EmailFlow" key="To_1"/>
                <key-binding alias="new dw.util.HashMap()" key="From_2"/>
                <key-binding alias="MailParams" key="To_2"/>
                <key-binding alias="null" key="From_4"/>
                <key-binding alias="null" key="To_4"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_5"/>
                <key-binding alias="null" key="From_6"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
                <key-binding alias="MailTo" key="To_3"/>
                <key-binding alias="Task['error-email']" key="From_3"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="To_9"/>
                <key-binding alias="MailParams.put(&quot;File&quot;, File)" key="From_7"/>
                <key-binding alias="MailParams.put(&quot;timeStampValue&quot;, timeStampValue)" key="From_8"/>
                <key-binding alias="MailParams.put(&quot;oldFileName&quot;, oldFileName)" key="From_9"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
            </node>
            <simple-transition/>
            <node>
              <call-node start-name-ref="Email-SendMail"/>
              <node-display x="0" y="1"/>
            </node>
            <transition target-connector="in1" target-path="../+1"/>
          </segment>
        </branch>
      </node>
      <transition target-connector="in2" target-path="./+1">
        <transition-display>
          <bend-point relative-to="source" x="1" y="0"/>
          <bend-point relative-to="target" x="1" y="0"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="4"/>
      </node>
      <simple-transition/>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="DeleteFeed">
    <segment>
      <node>
        <start-node call-mode="private" name="DeleteFeed" secure="false"/>
        <node-display x="9" y="19"/>
      </node>
      <simple-transition/>
      <node>
        <decision-node condition-key="MasterCatalogTask == null || RemoteFile.indexOf(MasterCatalogTask['remote-file-pattern']) &lt; 0" condition-operator="expr"/>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="yes">
          <transition target-connector="in"/>
          <segment>
            <node>
              <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <config-property key="OnError" value="PIPELET_ERROR"/>
                <config-property key="ScriptFile" value="feeds/DeleteFeed.ds"/>
                <key-binding alias="null" key="ScriptLog"/>
                <key-binding alias="RemoteFileURL" key="RemoteFileURL"/>
                <key-binding alias="Task['remote-login']" key="RemoteLogin"/>
                <key-binding alias="Task['remote-password']" key="RemotePassword"/>
                <key-binding alias="RemoteFile" key="RemoteFile"/>
                <key-binding alias="Task['remote-folder-url']" key="RemoteFolderURL"/>
                <key-binding alias="StatusMessage" key="StatusMessage"/>
              </pipelet-node>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="error">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="1" y="0"/>
                    <bend-point relative-to="target" x="1" y="-1"/>
                    <bend-point relative-to="target" x="0" y="-1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
                    <node-display x="0" y="2"/>
                    <branch basename="b2" source-connector="yes">
                      <transition target-connector="in"/>
                      <segment>
                        <node>
                          <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                            <config-property key="Transactional" value="false"/>
                            <key-binding alias="true" key="From_0"/>
                            <key-binding alias="InstanceReqd" key="To_0"/>
                            <key-binding alias="&quot;feed_delete_error&quot;" key="From_1"/>
                            <key-binding alias="EmailFlow" key="To_1"/>
                            <key-binding alias="null" key="From_6"/>
                            <key-binding alias="null" key="To_6"/>
                            <key-binding alias="null" key="From_7"/>
                            <key-binding alias="null" key="To_7"/>
                            <key-binding alias="null" key="From_8"/>
                            <key-binding alias="null" key="To_8"/>
                            <key-binding alias="null" key="From_9"/>
                            <key-binding alias="null" key="To_9"/>
                            <key-binding alias="Task['error-email']" key="From_2"/>
                            <key-binding alias="MailTo" key="To_2"/>
                            <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                            <key-binding alias="MailParams" key="To_4"/>
                            <key-binding alias="MailSubject" key="To_3"/>
                            <key-binding alias="" key="From_3"/>
                          </pipelet-node>
                          <node-display x="0" y="1"/>
                        </node>
                        <simple-transition/>
                        <node>
                          <call-node start-name-ref="Custom_FeedSteps-DeleteEmail"/>
                          <node-display x="0" y="1"/>
                        </node>
                        <transition target-connector="in1" target-path="../+1"/>
                      </segment>
                    </branch>
                  </node>
                  <transition target-connector="in1" target-path="./+1">
                    <transition-display>
                      <bend-point relative-to="source" x="1" y="0"/>
                      <bend-point relative-to="target" x="1" y="0"/>
                    </transition-display>
                  </transition>
                </segment>
                <segment>
                  <node>
                    <join-node/>
                    <node-display x="0" y="3"/>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="0" y="1"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <decision-node condition-key="Task['on-temporary-error']!='FAIL'" condition-operator="expr"/>
                    <node-display x="0" y="1"/>
                    <branch basename="b2" source-connector="yes">
                      <transition target-connector="in">
                        <transition-display>
                          <bend-point relative-to="source" x="0" y="1"/>
                        </transition-display>
                      </transition>
                      <segment>
                        <node>
                          <end-node name="ERROR"/>
                          <node-display x="0" y="1"/>
                        </node>
                      </segment>
                    </branch>
                  </node>
                  <simple-transition>
                    <transition-display>
                      <bend-point relative-to="source" x="1" y="0"/>
                    </transition-display>
                  </simple-transition>
                  <node>
                    <stop-node/>
                    <node-display orientation="horizontal" x="1" y="0"/>
                  </node>
                </segment>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
              </transition-display>
            </simple-transition>
            <node>
              <end-node name="SUCCESS"/>
              <node-display x="0" y="1"/>
            </node>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="1" y="0"/>
        </transition-display>
      </simple-transition>
      <node>
        <jump-node start-name-ref="Custom_FeedSteps-DeleteMasterCatalogFeed"/>
        <node-display orientation="horizontal" x="1" y="0"/>
      </node>
    </segment>
  </branch>
  <branch basename="DeleteFuturePriceTables">
    <segment>
      <node>
        <start-node call-mode="private" name="DeleteFuturePriceTables" secure="false"/>
        <node-display x="17" y="18"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/pricebook/Create_PID_List.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="File" key="File"/>
          <key-binding alias="pidList" key="PidList"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="error">
          <transition target-connector="in1" target-path="./+3">
            <transition-display>
              <bend-point relative-to="source" x="4" y="0"/>
              <bend-point relative-to="target" x="4" y="0"/>
            </transition-display>
          </transition>
        </branch>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="new Date().getTime().toString()" key="From_0"/>
          <key-binding alias="timestamp" key="To_0"/>
          <key-binding alias="&quot;/Price/exportedPriceBooks_&quot;" key="From_1"/>
          <key-binding alias="filename_pb" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="filename_pb +  timestamp + &quot;.xml&quot;" key="From_0"/>
          <key-binding alias="DWPriceBooks" key="To_0"/>
          <key-binding alias="null" key="From_1"/>
          <key-binding alias="null" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="ExportPriceBooks" pipelet-set-identifier="bc_api">
          <key-binding alias="null" key="OverwriteExportFile"/>
          <key-binding alias="DWPriceBooks" key="ExportFile"/>
          <key-binding alias="dw.catalog.PriceBookMgr.getSitePriceBooks().iterator()" key="PriceBooks"/>
          <key-binding alias="null" key="ErrorMsg"/>
          <key-binding alias="null" key="LogFileName"/>
          <key-binding alias="null" key="Status"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b3" source-connector="error">
          <transition target-connector="in1" target-path="./+3">
            <transition-display>
              <bend-point relative-to="source" x="4" y="0"/>
              <bend-point relative-to="target" x="4" y="0"/>
            </transition-display>
          </transition>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/pricebook/CreatePBsWithDeleteMode.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="DWPriceBooks" key="DWPriceBooks"/>
          <key-binding alias="pidList" key="PidList"/>
          <key-binding alias="DeletePriceBooks" key="DeletePriceBooks"/>
          <key-binding alias="timestamp" key="TimeStamp"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b4" source-connector="error">
          <transition target-connector="in"/>
          <segment>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <key-binding alias="Task['archive-folder']+&quot;/Error&quot;" key="From_0"/>
                <key-binding alias="archive-location_ie" key="To_0"/>
                <key-binding alias="DWPriceBooks" key="From_1"/>
                <key-binding alias="file_ie" key="To_1"/>
                <key-binding alias="null" key="From_2"/>
                <key-binding alias="null" key="To_2"/>
                <key-binding alias="null" key="From_3"/>
                <key-binding alias="null" key="To_3"/>
                <key-binding alias="null" key="From_4"/>
                <key-binding alias="null" key="To_4"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_5"/>
                <key-binding alias="null" key="From_6"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
              </pipelet-node>
              <node-display orientation="horizontal" x="1" y="0"/>
            </node>
            <transition target-connector="in3" target-path="../+2">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="target" x="3" y="0"/>
              </transition-display>
            </transition>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="ImportPriceBooks" pipelet-set-identifier="bc_api">
          <key-binding alias="DeletePriceBooks" key="ImportFile"/>
          <key-binding alias="&quot;MERGE&quot;" key="ImportMode"/>
          <key-binding alias="null" key="ErrorCode"/>
          <key-binding alias="null" key="ErrorMsg"/>
          <key-binding alias="null" key="LogFileName"/>
          <key-binding alias="null" key="Status"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b5" source-connector="error">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="1" y="0"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                <config-property key="Transactional" value="false"/>
                <key-binding alias="Task['archive-folder']+&quot;/Error&quot;" key="From_0"/>
                <key-binding alias="archive-location_ie" key="To_0"/>
                <key-binding alias="DeletePriceBooks" key="From_1"/>
                <key-binding alias="file_ie" key="To_1"/>
                <key-binding alias="null" key="From_2"/>
                <key-binding alias="null" key="To_2"/>
                <key-binding alias="null" key="From_3"/>
                <key-binding alias="null" key="To_3"/>
                <key-binding alias="null" key="From_4"/>
                <key-binding alias="null" key="To_4"/>
                <key-binding alias="null" key="From_5"/>
                <key-binding alias="null" key="To_5"/>
                <key-binding alias="null" key="From_6"/>
                <key-binding alias="null" key="To_6"/>
                <key-binding alias="null" key="From_7"/>
                <key-binding alias="null" key="To_7"/>
                <key-binding alias="null" key="From_8"/>
                <key-binding alias="null" key="To_8"/>
                <key-binding alias="null" key="From_9"/>
                <key-binding alias="null" key="To_9"/>
              </pipelet-node>
              <node-display orientation="horizontal" x="1" y="0"/>
            </node>
            <transition target-connector="in1" target-path="../+1">
              <transition-display>
                <bend-point relative-to="target" x="2" y="0"/>
              </transition-display>
            </transition>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="Task['archive-folder']+&quot;/Success&quot;" key="From_0"/>
          <key-binding alias="archive-location_ie" key="To_0"/>
          <key-binding alias="DeletePriceBooks" key="From_1"/>
          <key-binding alias="file_ie" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <call-node start-name-ref="Custom_FeedSteps-ArchiveGeneratedFiles_PriceBook_IE"/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="Task['archive-folder']+&quot;/Success&quot;" key="From_0"/>
          <key-binding alias="archive-location_ie" key="To_0"/>
          <key-binding alias="DWPriceBooks" key="From_1"/>
          <key-binding alias="file_ie" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <call-node start-name-ref="Custom_FeedSteps-ArchiveGeneratedFiles_PriceBook_IE"/>
        <node-display x="0" y="1"/>
      </node>
      <transition target-connector="in1" target-path="./+1"/>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="DownloadEmail">
    <segment>
      <node>
        <start-node call-mode="private" name="DownloadEmail" secure="false"/>
        <node-display x="3" y="20"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;remote-login&quot;, Task['remote-login'])" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;remote-password&quot;, Task['remote-password'])" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;JobConfigurationId&quot;, JobConfigurationID)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;TaskId&quot;, Task.id)" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;instanceName&quot;,  instanceName)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;SiteId&quot;, SiteId)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;RemoteFile&quot;, RemoteFile)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;remote-folder-url&quot;, Task['remote-folder-url'])" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="From_0"/>
          <key-binding alias="null" key="To_0"/>
          <key-binding alias="null" key="From_1"/>
          <key-binding alias="null" key="To_1"/>
          <key-binding alias="null" key="From_2"/>
          <key-binding alias="null" key="To_2"/>
          <key-binding alias="null" key="From_3"/>
          <key-binding alias="null" key="To_3"/>
          <key-binding alias="null" key="From_4"/>
          <key-binding alias="null" key="To_4"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="To_5"/>
          <key-binding alias="MailParams.put(&quot;StatusMessage&quot;,StatusMessage)" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <call-node start-name-ref="Email-SendMail"/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="ValidationEmail">
    <segment>
      <node>
        <start-node call-mode="private" name="ValidationEmail" secure="false"/>
        <node-display x="4" y="20"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;ValidationStatus.code&quot;, ValidationStatus.code)" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;Schema&quot;, Schema)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;FileName&quot;, File)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;instanceName&quot;, instanceName)" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;ValidationErrorCount&quot;, ValidationStatus.details.ValidationErrorCount)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;ValidationStatus.message&quot;,ValidationStatus.message)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;JobConfigurationId&quot;, JobConfigurationID)" key="From_9"/>
          <key-binding alias="MailParams.put(&quot;SiteId&quot;, SiteId)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;TaskId&quot;, Task.id)" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;LogFileName&quot;, ValidationStatus.details.LogFileName)" key="From_6"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;LogFileName&quot;, ValidationStatus.details.LogFileName)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <call-node start-name-ref="Email-SendMail"/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="NoInventoryRecords">
    <segment>
      <node>
        <start-node call-mode="private" name="NoInventoryRecords" secure="false"/>
        <node-display x="5" y="21"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="true" key="From_0"/>
          <key-binding alias="InstanceReqd" key="To_0"/>
          <key-binding alias="&quot;sod_noInventoryRecords&quot;" key="From_1"/>
          <key-binding alias="EmailFlow" key="To_1"/>
          <key-binding alias="null" key="From_5"/>
          <key-binding alias="null" key="From_6"/>
          <key-binding alias="null" key="To_6"/>
          <key-binding alias="null" key="From_7"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="From_8"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="From_9"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="" key="From_3"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <call-node start-name-ref="Email-SendMail"/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="ArchiveGeneratedFiles_PriceBook_IE">
    <segment>
      <node>
        <start-node call-mode="private" name="ArchiveGeneratedFiles_PriceBook_IE" secure="false"/>
        <node-display x="20" y="22"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/ArchiveFeed.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="Task['archive-folder'].toString()" key="LocalArchiveFolder"/>
          <key-binding alias="LocalFile" key="LocalFile"/>
          <key-binding alias="file_ie" key="File"/>
          <key-binding alias="archive-location_ie" key="ArchiveFolder"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="error">
          <transition target-connector="in"/>
          <segment>
            <node>
              <decision-node condition-key="!empty(Task['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
              <node-display x="1" y="0"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in"/>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="InstanceReqd" key="To_0"/>
                      <key-binding alias="&quot;feed_archive_error&quot;" key="From_1"/>
                      <key-binding alias="EmailFlow" key="To_1"/>
                      <key-binding alias="null" key="From_5"/>
                      <key-binding alias="null" key="To_5"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="Task['error-email']" key="From_2"/>
                      <key-binding alias="MailTo" key="To_2"/>
                      <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                      <key-binding alias="MailParams" key="To_4"/>
                      <key-binding alias="MailSubject" key="To_3"/>
                      <key-binding alias="" key="From_3"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition/>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-ArchiveEmail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../../+1"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="../+1">
              <transition-display>
                <bend-point relative-to="source" x="2" y="0"/>
                <bend-point relative-to="target" x="2" y="0"/>
              </transition-display>
            </transition>
          </segment>
        </branch>
      </node>
      <transition target-connector="in1" target-path="./+1">
        <transition-display>
          <bend-point relative-to="target" x="-2" y="0"/>
        </transition-display>
      </transition>
    </segment>
    <segment>
      <node>
        <join-node/>
        <node-display x="1" y="3"/>
      </node>
      <simple-transition/>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="UploadEmail">
    <segment>
      <node>
        <start-node call-mode="private" name="UploadEmail" secure="false"/>
        <node-display x="3" y="27"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;remote-login&quot;, Task['remote-login'])" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;remote-password&quot;, Task['remote-password'])" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;JobConfigurationId&quot;, JobConfigurationID)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;TaskId&quot;, Task.id)" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;instanceName&quot;,  instanceName)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;SiteId&quot;, SiteId)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;RemoteFile&quot;, RemoteFile)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;remote-folder-url&quot;, Task['remote-folder-url'])" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <call-node start-name-ref="Email-SendMail"/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="DeleteMasterCatalogFeed">
    <segment>
      <node>
        <start-node call-mode="private" name="DeleteMasterCatalogFeed" secure="false"/>
        <node-display x="6" y="26"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <config-property key="OnError" value="PIPELET_ERROR"/>
          <config-property key="ScriptFile" value="feeds/DeleteFeed.ds"/>
          <key-binding alias="null" key="ScriptLog"/>
          <key-binding alias="RemoteFileURL" key="RemoteFileURL"/>
          <key-binding alias="MasterCatalogTask['remote-login']" key="RemoteLogin"/>
          <key-binding alias="MasterCatalogTask['remote-password']" key="RemotePassword"/>
          <key-binding alias="RemoteFile" key="RemoteFile"/>
          <key-binding alias="MasterCatalogTask['remote-folder-url']" key="RemoteFolderURL"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
        <branch basename="b2" source-connector="error">
          <transition target-connector="in">
            <transition-display>
              <bend-point relative-to="source" x="1" y="0"/>
              <bend-point relative-to="target" x="1" y="-1"/>
              <bend-point relative-to="target" x="0" y="-1"/>
            </transition-display>
          </transition>
          <segment>
            <node>
              <decision-node condition-key="!empty(MasterCatalogTask['error-email']) &amp;&amp; !empty(Config.custom.fromEmail)" condition-operator="expr"/>
              <node-display x="0" y="3"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in"/>
                <segment>
                  <node>
                    <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
                      <config-property key="Transactional" value="false"/>
                      <key-binding alias="true" key="From_0"/>
                      <key-binding alias="InstanceReqd" key="To_0"/>
                      <key-binding alias="&quot;feed_delete_error&quot;" key="From_1"/>
                      <key-binding alias="EmailFlow" key="To_1"/>
                      <key-binding alias="null" key="From_6"/>
                      <key-binding alias="null" key="To_6"/>
                      <key-binding alias="null" key="From_7"/>
                      <key-binding alias="null" key="To_7"/>
                      <key-binding alias="null" key="From_8"/>
                      <key-binding alias="null" key="To_8"/>
                      <key-binding alias="null" key="From_9"/>
                      <key-binding alias="null" key="To_9"/>
                      <key-binding alias="MasterCatalogTask['error-email']" key="From_2"/>
                      <key-binding alias="MailTo" key="To_2"/>
                      <key-binding alias="new dw.util.HashMap()" key="From_4"/>
                      <key-binding alias="MailParams" key="To_4"/>
                      <key-binding alias="MailSubject" key="To_3"/>
                      <key-binding alias="" key="From_3"/>
                    </pipelet-node>
                    <node-display x="0" y="1"/>
                  </node>
                  <simple-transition/>
                  <node>
                    <call-node start-name-ref="Custom_FeedSteps-DeleteMasterCatalogEmail"/>
                    <node-display x="0" y="1"/>
                  </node>
                  <transition target-connector="in1" target-path="../+1"/>
                </segment>
              </branch>
            </node>
            <transition target-connector="in1" target-path="./+1">
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
                <bend-point relative-to="target" x="1" y="0"/>
              </transition-display>
            </transition>
          </segment>
          <segment>
            <node>
              <join-node/>
              <node-display x="0" y="3"/>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="0" y="1"/>
              </transition-display>
            </simple-transition>
            <node>
              <decision-node condition-key="MasterCatalogTask['on-temporary-error']!='FAIL'" condition-operator="expr"/>
              <node-display x="0" y="1"/>
              <branch basename="b2" source-connector="yes">
                <transition target-connector="in">
                  <transition-display>
                    <bend-point relative-to="source" x="0" y="1"/>
                  </transition-display>
                </transition>
                <segment>
                  <node>
                    <end-node name="ERROR"/>
                    <node-display x="0" y="1"/>
                  </node>
                </segment>
              </branch>
            </node>
            <simple-transition>
              <transition-display>
                <bend-point relative-to="source" x="1" y="0"/>
              </transition-display>
            </simple-transition>
            <node>
              <stop-node/>
              <node-display orientation="horizontal" x="1" y="0"/>
            </node>
          </segment>
        </branch>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node name="SUCCESS"/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="DeleteMasterCatalogEmail">
    <segment>
      <node>
        <start-node call-mode="private" name="DeleteMasterCatalogEmail" secure="false"/>
        <node-display x="4" y="27"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;SiteId&quot;, SiteId)" key="From_2"/>
          <key-binding alias="MailParams.put(&quot;instanceName&quot;,   instanceName)" key="From_3"/>
          <key-binding alias="MailParams.put(&quot;TaskId&quot;, MasterCatalogTask.id)" key="From_4"/>
          <key-binding alias="MailParams.put(&quot;remote-folder-url&quot;, MasterCatalogTask['remote-folder-url'])" key="From_5"/>
          <key-binding alias="MailParams.put(&quot;RemoteFile&quot;, RemoteFile)" key="From_6"/>
          <key-binding alias="MailParams.put(&quot;remote-login&quot;, MasterCatalogTask['remote-login'])" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;remote-password&quot;, MasterCatalogTask['remote-password'])" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;JobConfigurationId&quot;, JobConfigurationID)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;remote-folder-url&quot;, MasterCatalogTask['remote-folder-url'])" key="From_5"/>
          <key-binding alias="MailParams.put(&quot;TaskId&quot;, MasterCatalogTask.id)" key="From_7"/>
          <key-binding alias="MailParams.put(&quot;instanceName&quot;,   instanceName)" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;SiteId&quot;, SiteId)" key="From_9"/>
          <key-binding alias="MailParams.put(&quot;RemoteFile&quot;, RemoteFile)" key="From_3"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <pipelet-node pipelet-name="Assign" pipelet-set-identifier="bc_api">
          <config-property key="Transactional" value="false"/>
          <key-binding alias="null" key="To_7"/>
          <key-binding alias="null" key="To_8"/>
          <key-binding alias="null" key="To_9"/>
          <key-binding alias="MailParams.put(&quot;remote-folder-url&quot;, MasterCatalogTask['remote-folder-url'])" key="From_8"/>
          <key-binding alias="MailParams.put(&quot;RemoteFile&quot;, RemoteFile)" key="From_9"/>
        </pipelet-node>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition/>
      <node>
        <call-node start-name-ref="Email-SendMail"/>
        <node-display x="0" y="1"/>
      </node>
      <simple-transition>
        <transition-display>
          <bend-point relative-to="source" x="0" y="1"/>
        </transition-display>
      </simple-transition>
      <node>
        <end-node/>
        <node-display x="0" y="1"/>
      </node>
    </segment>
  </branch>
  <branch basename="_ANONYMOUS_BRANCH_33">
    <segment>
      <node>
        <text-node>
          <description>The Stop node makes the job show as ERROR in BM. Standard job notification for ERRORs can be used.</description>
        </text-node>
        <node-display x="12" y="31"/>
      </node>
    </segment>
  </branch>
</pipeline>
